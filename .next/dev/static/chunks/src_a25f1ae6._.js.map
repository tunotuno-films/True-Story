{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/PrivacyPolicy.tsx"],"sourcesContent":["import React from 'react';\n\ninterface PrivacyPolicyProps {\n  onClose: () => void;\n}\n\nconst PrivacyPolicy: React.FC<PrivacyPolicyProps> = ({ onClose }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-95 z-[100] p-4 sm:p-8 md:p-12 overflow-y-auto\">\n      <div className=\"container mx-auto max-w-4xl text-neutral-300 font-noto text-xs md:text-sm\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-white\">個人情報保護（プライバシーポリシー）</h1>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-white text-3xl\">&times;</button>\n        </div>\n        <div className=\"space-y-4 md:space-y-6 leading-relaxed\">\n\n          <p>\n            True Story【実話の物語】（以下「当社」といいます）は、制作活動および会員サービス（会員マイページを含む）を提供する上で\n            取扱うお客様・お取引先様・従業員等の個人情報を適切に保護することを社会的責務と認識し、以下の方針に基づき個人情報の保護に努めます。\n          </p>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">1. 個人情報の定義</h2>\n            <p>\n              本方針において「個人情報」とは、個人情報保護法に定められた定義に従い、氏名、生年月日、住所、電話番号、メールアドレス、\n              勤務先、ログインID、パスワード、利用履歴その他特定の個人を識別できるもの、ならびに他の情報と照合することで個人を識別できるものを指します。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">2. 個人情報の取得方法</h2>\n            <p>\n              当社は、以下の方法で個人情報を取得します。\n            </p>\n            <ul className=\"list-disc list-inside ml-4 mt-2 space-y-1\">\n              <li>会員登録フォームや会員マイページでの入力</li>\n              <li>ウェブサイトやメールフォーム、電話、書面等を通じた直接取得</li>\n              <li>イベント、セミナー、アンケート等での取得</li>\n              <li>業務委託先や取引先等から適法に提供を受けた場合</li>\n              <li>公表された情報から適法に収集する場合</li>\n            </ul>\n            <p className=\"mt-2\">取得の際には、利用目的を明確にし、適法かつ公正な手段で行います。</p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">3. 個人情報の利用目的</h2>\n            <p>当社は、取得した個人情報を以下の目的で利用します。</p>\n            <ul className=\"list-disc list-inside ml-4 mt-2 space-y-1\">\n              <li>サービスや商品の提供および契約履行</li>\n              <li>会員登録、本人認証、会員マイページ機能の提供・管理</li>\n              <li>会員向けサービス（履歴表示、ポイント、カスタマイズ機能等）の運営</li>\n              <li>退会手続きおよび退会後の記録管理</li>\n              <li>お問い合わせやご依頼への対応</li>\n              <li>契約、取引、請求、支払い等の事務処理</li>\n              <li>メールマガジン、ニュースレター、イベント案内等の送付</li>\n              <li>アンケート調査、モニター募集等の実施</li>\n              <li>法令や契約に基づく権利の行使または義務の履行</li>\n              <li>防犯・安全管理のための記録・監視</li>\n              <li>その他、事前に本人の同意を得た目的</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">4. 個人情報の第三者提供</h2>\n            <p>\n              当社は、以下の場合を除き、本人の同意なく第三者に個人情報を提供しません。\n            </p>\n            <ul className=\"list-disc list-inside ml-4 mt-2 space-y-1\">\n              <li>法令に基づく場合</li>\n              <li>人の生命、身体または財産の保護のために必要で、本人の同意を得ることが困難な場合</li>\n              <li>公衆衛生の向上または児童の健全な育成推進のために特に必要な場合で、本人の同意を得ることが困難な場合</li>\n              <li>国の機関や地方公共団体等が法令の定める事務を遂行するために協力する必要がある場合</li>\n              <li>業務委託先に必要な範囲で提供する場合（委託先は適切に監督します）</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">5. 個人情報の委託</h2>\n            <p>\n              当社は、事業運営に必要な範囲で業務を外部に委託する場合、委託先が個人情報を適切に取り扱うよう契約等により義務付け、\n              必要かつ適切な監督を行います。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">6. 個人情報の安全管理措置</h2>\n            <p>\n              当社は、個人情報の漏えい、滅失、毀損、不正アクセス等を防止するため、以下の安全管理措置を講じます。\n            </p>\n            <ul className=\"list-disc list-inside ml-4 mt-2 space-y-1\">\n              <li>個人情報管理責任者の設置</li>\n              <li>個人情報の利用制限とアクセス権限の管理</li>\n              <li>パスワードや暗号化等の技術的対策</li>\n              <li>社員教育や内部監査の実施</li>\n              <li>保管期限を過ぎた個人情報の適切な廃棄・消去</li>\n            </ul>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">7. クッキー（Cookie）およびローカルストレージ等の利用</h2>\n            <p>\n              当社ウェブサイトおよび会員マイページでは、利便性向上やアクセス解析等のために Cookie や類似技術を使用する場合があります。\n              これにより取得される情報は、個人を特定するものではなく、設定により使用を制限できます。必要に応じて、Google Analytics 等の外部サービスを利用することがあります。\n            </p>\n            <p className=\"mt-2\">\n              また、会員マイページにおいては、ログイン状態の保持、表示設定の保存、利用状況の記録等のために、ブラウザの\n              ローカルストレージ（LocalStorage・SessionStorage）を利用する場合があります。ローカルストレージに保存される情報は、\n              利用者の端末上でのみ保持され、当社サーバーに自動的に送信されることはありません。\n            </p>\n            <p className=\"mt-2\">\n              利用者は、ご自身のブラウザ設定により、Cookieやローカルストレージの使用を制限または削除することができます。ただし、\n              その場合、会員マイページの一部機能が正しく利用できない可能性があります。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">8. 個人情報の開示・訂正・利用停止等</h2>\n            <p>\n              本人または代理人から、当社が保有する個人情報の開示・訂正・追加・削除・利用停止・第三者提供停止の請求があった場合は、\n              法令に従い適切かつ速やかに対応します。請求の際には、本人確認のための書類提出をお願いする場合があります。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">9. 未成年の会員情報について</h2>\n            <p>\n              16歳未満の方が会員登録を行う場合は、必ず保護者の同意を得てください。当社は、保護者の同意が確認できない場合、\n              会員サービスを提供できないことがあります。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">10. 法令・規範の遵守</h2>\n            <p>\n              当社は、個人情報の取扱いに関して適用される法令、国が定める指針、その他の規範を遵守します。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">11. 継続的改善</h2>\n            <p>\n              当社は、個人情報保護のための管理体制や取組を継続的に見直し、改善します。\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">12. お問い合わせ窓口</h2>\n            <p>\n              本方針および個人情報の取扱いに関するお問い合わせは、以下の窓口までお願いします。<br />\n              True Story【実話の物語】<br />\n              電話番号：090-9646-8942 （代表）<br />\n              メールアドレス：info@truestory.jp<br />\n              受付時間：平日 11:00〜19:00（土日祝・年末年始を除く）\n            </p>\n          </section>\n\n          <section>\n            <h2 className=\"text-xl font-semibold text-white mb-2\">13. 制定日・改訂日</h2>\n            <p>制定日：2025年08月01日<br />改訂日：2025年09月13日</p>\n          </section>\n        </div>\n        <div className=\"text-center mt-8 md:mt-12\">\n          <button onClick={onClose} className=\"bg-white text-black font-bold py-3 px-8 rounded-full hover:opacity-90 transition-opacity duration-300 text-lg\">\n            閉じる\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PrivacyPolicy;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 672, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/CookieConsent.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PrivacyPolicy from './PrivacyPolicy';\n\nconst CookieConsent: React.FC = () => {\n  const [showBanner, setShowBanner] = useState(false);\n  const [showPrivacy, setShowPrivacy] = useState(false);\n\n  useEffect(() => {\n    const consent = localStorage.getItem('cookie_consent');\n    if (consent !== 'dismissed') {\n      setShowBanner(true);\n    }\n  }, []);\n\n  const handleDismiss = () => {\n    localStorage.setItem('cookie_consent', 'dismissed');\n    setShowBanner(false);\n  };\n\n  if (!showBanner) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"fixed bottom-0 left-0 right-0 bg-gray-800 text-white p-4 z-50\">\n        <div className=\"container mx-auto flex flex-col md:flex-row justify-between items-center gap-3\">\n          <p className=\"text-sm\">\n            当サイトでは、ログイン機能などサービスの提供に必須のCookieを使用しています。サイトの利用を継続することで、これらのCookieの使用に同意したものとみなされます。\n            詳細は\n            <button\n              type=\"button\"\n              onClick={() => setShowPrivacy(true)}\n              className=\"underline ml-1\"\n            >\n              プライバシーポリシー\n            </button>\n            をご確認ください。\n          </p>\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={handleDismiss}\n              className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n              aria-label=\"閉じる\"\n            >\n              OK\n            </button>\n          </div>\n        </div>\n      </div>\n      {showPrivacy && <PrivacyPolicy onClose={() => setShowPrivacy(false)} />}\n    </>\n  );\n};\n\nexport default CookieConsent;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAEA,MAAM,gBAA0B;;IAC9B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;mCAAC;YACR,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,IAAI,YAAY,aAAa;gBAC3B,cAAc;YAChB;QACF;kCAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,aAAa,OAAO,CAAC,kBAAkB;QACvC,cAAc;IAChB;IAEA,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,qBACE;;0BACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;;gCAAU;8CAGrB,6LAAC;oCACC,MAAK;oCACL,SAAS,IAAM,eAAe;oCAC9B,WAAU;8CACX;;;;;;gCAEQ;;;;;;;sCAGX,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,SAAS;gCACT,WAAU;gCACV,cAAW;0CACZ;;;;;;;;;;;;;;;;;;;;;;YAMN,6BAAe,6LAAC,iJAAa;gBAAC,SAAS,IAAM,eAAe;;;;;;;;AAGnE;GAlDM;KAAA;uCAoDS","debugId":null}},
    {"offset": {"line": 780, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Header.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useRouter, usePathname } from 'next/navigation';\nimport { supabase } from '../lib/supabaseClient';\nimport { Menu, X } from 'lucide-react';\nimport CookieConsent from './CookieConsent';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface Vote {\n  message: string | null;\n  voter_name: string | null;\n}\n\ninterface NavItem {\n  id?: string;\n  path?: string;\n  label: string;\n}\n\nconst Header: React.FC = () => {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { session } = useAuth();\n  const isLoggedIn = !!session;\n\n  const [latestVotes, setLatestVotes] = useState<Vote[]>([]);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const animationRef = useRef<HTMLDivElement>(null);\n  const [applyWillChange, setApplyWillChange] = useState(false);\n  const [prefersReducedMotion, setPrefersReducedMotion] = useState(false);\n\n  const fetchLatestVotes = useCallback(async () => {\n    const { data, error } = await supabase\n      .from('votes')\n      .select('message, voter_name')\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching latest votes:', error);\n    } else {\n      setLatestVotes(data || []);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchLatestVotes();\n  }, [fetchLatestVotes]);\n\n  const handleAnimationIteration = () => {\n    fetchLatestVotes();\n  };\n\n  const scrollToSection = (sectionId: string) => {\n    if (pathname !== '/') {\n      router.push(`/#${sectionId}`);\n    } else {\n      const element = document.getElementById(sectionId);\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth' });\n      }\n    }\n  };\n\n  const handleMobileLinkClick = (sectionId: string) => {\n    scrollToSection(sectionId);\n    setIsMenuOpen(false);\n  };\n\n  const scrollToTop = () => {\n    if (pathname !== '/') {\n      router.push('/');\n    } else {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    }\n  };\n\n  const navItems: NavItem[] = [\n    // { path: '/about', label: 'ABOUT' },\n    { id: 'truestoryform', label: 'TRUE STORY' },\n    { id: 'artist', label: 'ARTIST' },\n    { id: 'crowdfunding', label: 'CROWDFUNDING' },\n    { id: 'contact', label: 'CONTACT' },\n  ];\n\n  const handleMyPageClick = () => {\n    router.push('/users');\n  };\n\n  // ログイン中はマイページへ遷移、未ログイン時はメンバーシップへ\n  const handleAuthButtonClick = () => {\n    if (isLoggedIn) {\n      const userId = session?.user?.id;\n      if (userId) {\n        router.push(`/users/member/${userId}`);\n        return;\n      }\n      // fallback: メンバーシップ画面へ（session が取れない場合）\n      handleMyPageClick();\n    } else {\n      handleMyPageClick();\n    }\n  };\n\n  useEffect(() => {\n    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');\n    const update = () => setPrefersReducedMotion(mq.matches);\n    update();\n    mq.addEventListener?.('change', update);\n    return () => mq.removeEventListener?.('change', update);\n  }, []);\n\n  useEffect(() => {\n    const el = animationRef.current;\n    if (!el) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setApplyWillChange(entry.isIntersecting && !prefersReducedMotion && latestVotes.length > 0);\n      },\n      { root: null, threshold: 0.1 }\n    );\n\n    observer.observe(el);\n    return () => observer.disconnect();\n  }, [latestVotes.length, prefersReducedMotion]);\n\n  return (\n    <>\n      <header className=\"sticky top-0 z-50\">\n        <nav className=\"bg-black\">\n          <div className=\"container mx-auto px-4\">\n            <div className=\"flex items-center justify-between h-16\">\n              <div\n                className=\"text-white font-noto text-xl font-bold cursor-pointer\"\n                onClick={scrollToTop}\n              >\n                True Story【実話の物語】\n              </div>\n              \n              <div className=\"hidden xl_custom:flex items-center space-x-4 md:space-x-8\">\n                {navItems.map((item) => (\n                  <button\n                    key={item.label}\n                    onClick={() => {\n                      if (item.path) {\n                        router.push(item.path);\n                      } else if (item.id) {\n                        scrollToSection(item.id);\n                      }\n                    }}\n                    className=\"text-neutral-300 hover:text-white transition duration-300 font-noto\"\n                  >\n                    {item.label}\n                  </button>\n                ))}\n                <button\n                  onClick={handleAuthButtonClick}\n                  className=\"text-white transition duration-300 font-noto px-2 py-1 border border-transparent hover:opacity-90\"\n                >\n                  <span className=\"inline-block bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold py-2 px-4 rounded\">\n                   {isLoggedIn ? 'マイページ' : 'メンバーシップ'}\n                  </span>\n                </button>\n              </div>\n\n              <div className=\"xl_custom:hidden\">\n                <button onClick={() => setIsMenuOpen(!isMenuOpen)} className=\"text-white\">\n                  {isMenuOpen ? <X size={28} /> : <Menu size={28} />}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div \n            className={`xl_custom:hidden bg-black/95 backdrop-blur-md absolute w-full z-40 shadow-lg border-t border-gray-700 transition-all duration-300 ease-in-out transform origin-top ${\n              isMenuOpen \n                ? 'opacity-100 scale-y-100 translate-y-0' \n                : 'opacity-0 scale-y-0 -translate-y-2 pointer-events-none'\n            }`}\n          >\n            <div className=\"container mx-auto px-4 pb-4\">\n              {navItems.map((item, index) => (\n                <div \n                  key={item.label}\n                  className={`transition-all duration-300 ease-in-out ${\n                    isMenuOpen \n                      ? 'opacity-100 translate-y-0' \n                      : 'opacity-0 translate-y-2'\n                  }`}\n                  style={{ \n                    transitionDelay: isMenuOpen ? `${index * 50}ms` : '0ms' \n                  }}\n                >\n                  <button\n                    onClick={() => {\n                      if (item.path) {\n                        router.push(item.path);\n                        setIsMenuOpen(false);\n                      } else if (item.id) {\n                        handleMobileLinkClick(item.id);\n                      }\n                    }}\n                    className=\"block w-full text-left py-4 px-4 text-neutral-300 hover:text-white hover:bg-gray-800/50 transition-all duration-300 font-noto rounded-md\"\n                  >\n                    {item.label}\n                  </button>\n                  {index < navItems.length - 1 && (\n                    <div className=\"border-b border-gray-700/50 mx-2\"></div>\n                  )}\n                </div>\n              ))}\n              <div \n                className={`transition-all duration-300 ease-in-out ${\n                  isMenuOpen \n                    ? 'opacity-100 translate-y-0' \n                    : 'opacity-0 translate-y-2'\n                }`}\n                style={{ \n                  transitionDelay: isMenuOpen ? `${navItems.length * 50}ms` : '0ms' \n                }}\n              >\n                <div className=\"border-b border-gray-700/50 mx-2\"></div>\n                <button\n                  onClick={() => {\n                    handleAuthButtonClick();\n                    setIsMenuOpen(false);\n                  }}\n                  className=\"block w-full text-left py-4 px-4 transition-all duration-300 font-noto mt-2\"\n                >\n                  <span className=\"inline-block bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold py-2 px-4 rounded\">\n                    {isLoggedIn ? 'マイページ' : 'メンバーシップ'}\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </nav>\n\n        <div className=\"relative z-10 py-2 overflow-hidden isolate\">\n          <div\n            className=\"absolute inset-0 bg-gray-800/30 backdrop-blur-sm pointer-events-none\"\n            aria-hidden=\"true\"\n            style={{ backfaceVisibility: 'hidden', WebkitBackfaceVisibility: 'hidden' }}\n          />\n          <div className=\"container mx-auto px-6 md:px-12 relative\">\n            <div className=\"max-w-6xl mx-auto min-h-[44px]\">\n              {latestVotes.length > 0 && (\n                <div\n                  ref={animationRef}\n                  className=\"flex animate-scroll-left whitespace-nowrap text-white transform-gpu\"\n                  onAnimationIteration={handleAnimationIteration}\n                  style={{ willChange: applyWillChange ? 'transform' : undefined }}\n                >\n                  {latestVotes\n                    .filter(vote => vote.message && vote.message.trim() !== '')\n                    .map((vote, index) => (\n                      <div key={index} className=\"inline-flex items-center mx-8 flex-shrink-0\">\n                        <div className=\"text-left\">\n                          <p className=\"text-xs font-noto text-neutral-300\">\n                            {vote.voter_name || '匿名'}より\n                          </p>\n                          <p className=\"text-sm font-noto\">{vote.message}</p>\n                        </div>\n                      </div>\n                    ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n      <CookieConsent />\n    </>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;AAaA,MAAM,SAAmB;;IACvB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,6IAAO;IAC3B,MAAM,aAAa,CAAC,CAAC;IAErB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAS,EAAE;IACzD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAC5C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,yKAAQ,EAAC;IAEjE,MAAM,mBAAmB,IAAA,4KAAW;gDAAC;YACnC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,SACL,MAAM,CAAC,uBACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE1C,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,gCAAgC;YAChD,OAAO;gBACL,eAAe,QAAQ,EAAE;YAC3B;QACF;+CAAG,EAAE;IAEL,IAAA,0KAAS;4BAAC;YACR;QACF;2BAAG;QAAC;KAAiB;IAErB,MAAM,2BAA2B;QAC/B;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,IAAI,aAAa,KAAK;YACpB,OAAO,IAAI,CAAC,CAAC,EAAE,EAAE,WAAW;QAC9B,OAAO;YACL,MAAM,UAAU,SAAS,cAAc,CAAC;YACxC,IAAI,SAAS;gBACX,QAAQ,cAAc,CAAC;oBAAE,UAAU;gBAAS;YAC9C;QACF;IACF;IAEA,MAAM,wBAAwB,CAAC;QAC7B,gBAAgB;QAChB,cAAc;IAChB;IAEA,MAAM,cAAc;QAClB,IAAI,aAAa,KAAK;YACpB,OAAO,IAAI,CAAC;QACd,OAAO;YACL,OAAO,QAAQ,CAAC;gBAAE,KAAK;gBAAG,UAAU;YAAS;QAC/C;IACF;IAEA,MAAM,WAAsB;QAC1B,sCAAsC;QACtC;YAAE,IAAI;YAAiB,OAAO;QAAa;QAC3C;YAAE,IAAI;YAAU,OAAO;QAAS;QAChC;YAAE,IAAI;YAAgB,OAAO;QAAe;QAC5C;YAAE,IAAI;YAAW,OAAO;QAAU;KACnC;IAED,MAAM,oBAAoB;QACxB,OAAO,IAAI,CAAC;IACd;IAEA,iCAAiC;IACjC,MAAM,wBAAwB;QAC5B,IAAI,YAAY;YACd,MAAM,SAAS,SAAS,MAAM;YAC9B,IAAI,QAAQ;gBACV,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ;gBACrC;YACF;YACA,wCAAwC;YACxC;QACF,OAAO;YACL;QACF;IACF;IAEA,IAAA,0KAAS;4BAAC;YACR,MAAM,KAAK,OAAO,UAAU,CAAC;YAC7B,MAAM;2CAAS,IAAM,wBAAwB,GAAG,OAAO;;YACvD;YACA,GAAG,gBAAgB,GAAG,UAAU;YAChC;oCAAO,IAAM,GAAG,mBAAmB,GAAG,UAAU;;QAClD;2BAAG,EAAE;IAEL,IAAA,0KAAS;4BAAC;YACR,MAAM,KAAK,aAAa,OAAO;YAC/B,IAAI,CAAC,IAAI;YAET,MAAM,WAAW,IAAI;oCACnB,CAAC,CAAC,MAAM;oBACN,mBAAmB,MAAM,cAAc,IAAI,CAAC,wBAAwB,YAAY,MAAM,GAAG;gBAC3F;mCACA;gBAAE,MAAM;gBAAM,WAAW;YAAI;YAG/B,SAAS,OAAO,CAAC;YACjB;oCAAO,IAAM,SAAS,UAAU;;QAClC;2BAAG;QAAC,YAAY,MAAM;QAAE;KAAqB;IAE7C,qBACE;;0BACE,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,WAAU;4CACV,SAAS;sDACV;;;;;;sDAID,6LAAC;4CAAI,WAAU;;gDACZ,SAAS,GAAG,CAAC,CAAC,qBACb,6LAAC;wDAEC,SAAS;4DACP,IAAI,KAAK,IAAI,EAAE;gEACb,OAAO,IAAI,CAAC,KAAK,IAAI;4DACvB,OAAO,IAAI,KAAK,EAAE,EAAE;gEAClB,gBAAgB,KAAK,EAAE;4DACzB;wDACF;wDACA,WAAU;kEAET,KAAK,KAAK;uDAVN,KAAK,KAAK;;;;;8DAanB,6LAAC;oDACC,SAAS;oDACT,WAAU;8DAEV,cAAA,6LAAC;wDAAK,WAAU;kEACd,aAAa,UAAU;;;;;;;;;;;;;;;;;sDAK7B,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAO,SAAS,IAAM,cAAc,CAAC;gDAAa,WAAU;0DAC1D,2BAAa,6LAAC,oMAAC;oDAAC,MAAM;;;;;6GAAS,6LAAC,6MAAI;oDAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAMpD,6LAAC;gCACC,WAAW,CAAC,mKAAmK,EAC7K,aACI,0CACA,0DACJ;0CAEF,cAAA,6LAAC;oCAAI,WAAU;;wCACZ,SAAS,GAAG,CAAC,CAAC,MAAM,sBACnB,6LAAC;gDAEC,WAAW,CAAC,wCAAwC,EAClD,aACI,8BACA,2BACJ;gDACF,OAAO;oDACL,iBAAiB,aAAa,GAAG,QAAQ,GAAG,EAAE,CAAC,GAAG;gDACpD;;kEAEA,6LAAC;wDACC,SAAS;4DACP,IAAI,KAAK,IAAI,EAAE;gEACb,OAAO,IAAI,CAAC,KAAK,IAAI;gEACrB,cAAc;4DAChB,OAAO,IAAI,KAAK,EAAE,EAAE;gEAClB,sBAAsB,KAAK,EAAE;4DAC/B;wDACF;wDACA,WAAU;kEAET,KAAK,KAAK;;;;;;oDAEZ,QAAQ,SAAS,MAAM,GAAG,mBACzB,6LAAC;wDAAI,WAAU;;;;;;;+CAxBZ,KAAK,KAAK;;;;;sDA4BnB,6LAAC;4CACC,WAAW,CAAC,wCAAwC,EAClD,aACI,8BACA,2BACJ;4CACF,OAAO;gDACL,iBAAiB,aAAa,GAAG,SAAS,MAAM,GAAG,GAAG,EAAE,CAAC,GAAG;4CAC9D;;8DAEA,6LAAC;oDAAI,WAAU;;;;;;8DACf,6LAAC;oDACC,SAAS;wDACP;wDACA,cAAc;oDAChB;oDACA,WAAU;8DAEV,cAAA,6LAAC;wDAAK,WAAU;kEACb,aAAa,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAQpC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,WAAU;gCACV,eAAY;gCACZ,OAAO;oCAAE,oBAAoB;oCAAU,0BAA0B;gCAAS;;;;;;0CAE5E,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;8CACZ,YAAY,MAAM,GAAG,mBACpB,6LAAC;wCACC,KAAK;wCACL,WAAU;wCACV,sBAAsB;wCACtB,OAAO;4CAAE,YAAY,kBAAkB,cAAc;wCAAU;kDAE9D,YACE,MAAM,CAAC,CAAA,OAAQ,KAAK,OAAO,IAAI,KAAK,OAAO,CAAC,IAAI,OAAO,IACvD,GAAG,CAAC,CAAC,MAAM,sBACV,6LAAC;gDAAgB,WAAU;0DACzB,cAAA,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAE,WAAU;;gEACV,KAAK,UAAU,IAAI;gEAAK;;;;;;;sEAE3B,6LAAC;4DAAE,WAAU;sEAAqB,KAAK,OAAO;;;;;;;;;;;;+CALxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAe1B,6LAAC,iJAAa;;;;;;;AAGpB;GA/PM;;QACW,kJAAS;QACP,oJAAW;QACR,6IAAO;;;KAHvB;uCAiQS","debugId":null}},
    {"offset": {"line": 1239, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Title.tsx"],"sourcesContent":["import React from 'react';\nimport { ChevronDown } from 'lucide-react';\n\n// 環境変数から読み込み。無ければ public 配下のフォールバック画像を使用し、警告を出す\nconst BG_IMAGE_URL = process.env.NEXT_PUBLIC_BG_IMAGE_URL ?? '/img/20250917_image1_ai.png';\nif (!process.env.NEXT_PUBLIC_BG_IMAGE_URL) {\n  // 本番では環境変数を必ず設定してください（Vercel の Environment Variables を利用）\n  console.warn('NEXT_PUBLIC_BG_IMAGE_URL is not set. Using fallback image /img/20250917_image1_ai.png');\n}\n\nconst Title: React.FC = () => {\n  const scrollToSection = (sectionId: string) => {\n    const element = document.getElementById(sectionId);\n    if (element) {\n      element.scrollIntoView({ behavior: 'smooth' });\n    }\n  };\n\n  return (\n    <header\n      className=\"w-full flex flex-col justify-end items-start relative text-white -mt-28 h-screen bg-cover bg-center bg-no-repeat\"\n      style={{ backgroundImage: `url(${BG_IMAGE_URL})` }}\n    >\n      {/* 黒いオーバーレイ */}\n      {/* <div className=\"absolute inset-0 bg-black/70 z-0\" /> */}\n      {/* モバイルで少し上に移動: -translate-y-6 (mobile)、md以上で元位置に戻す */}\n      <div className=\"relative z-10 p-6 md:p-12 w-full transform -translate-y-20 md:-translate-y-8\">\n        <h2 className=\"font-noto text-lg md:text-3xl font-bold text-shadow mb-2 md:mb-4\">\n          あなたの物語が、未来をつくる。\n        </h2>\n        <h1 className=\"font-noto text-4xl md:text-8xl font-black text-shadow tracking-wider\">\n          True Story\n        </h1>\n        <p className=\"font-noto text-xl md:text-4xl font-bold text-shadow mt-1 md:mt-2\">\n          【実話の物語】\n        </p>\n        \n        <div className=\"mt-4 md:mt-8\">\n          <div className=\"text-xs md:text-sm text-shadow font-bold\">\n            運営：True Story【実話の物語】制作委員会\n          </div>\n        </div>\n\n        <button\n          onClick={() => scrollToSection('truestory')}\n          className=\"btn-cta inline-block mt-6 md:mt-12 mb-8 md:mb-0 bg-white text-black font-bold font-noto py-3 md:py-4 px-8 md:px-12 rounded-full text-base md:text-lg shadow-lg\"\n        >\n          あなたの実話を募集中\n        </button>\n        <p className=\"font-noto mt-2 md:mt-4 text-xs md:text-sm\">募集期間: 2025.09.22 - 2025.11.31</p>\n      </div>\n      <div className=\"absolute bottom-4 md:bottom-8 left-1/2 -translate-x-1/2 animate-bounce z-10\">\n        <ChevronDown className=\"w-6 h-6 md:w-8 md:h-8 text-white\" />\n      </div>\n    </header>\n  );\n};\n\nexport default Title;"],"names":[],"mappings":";;;;AAIqB;;AAHrB;;;AAEA,gDAAgD;AAChD,MAAM,eAAe,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAC7D,IAAI,CAAC,2KAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE;IACzC,0DAA0D;IAC1D,QAAQ,IAAI,CAAC;AACf;AAEA,MAAM,QAAkB;IACtB,MAAM,kBAAkB,CAAC;QACvB,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,IAAI,SAAS;YACX,QAAQ,cAAc,CAAC;gBAAE,UAAU;YAAS;QAC9C;IACF;IAEA,qBACE,6LAAC;QACC,WAAU;QACV,OAAO;YAAE,iBAAiB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;QAAC;;0BAKjD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAmE;;;;;;kCAGjF,6LAAC;wBAAG,WAAU;kCAAuE;;;;;;kCAGrF,6LAAC;wBAAE,WAAU;kCAAmE;;;;;;kCAIhF,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCAA2C;;;;;;;;;;;kCAK5D,6LAAC;wBACC,SAAS,IAAM,gBAAgB;wBAC/B,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBAAE,WAAU;kCAA4C;;;;;;;;;;;;0BAE3D,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,sOAAW;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/B;KA9CM;uCAgDS","debugId":null}},
    {"offset": {"line": 1366, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Introduction.tsx"],"sourcesContent":["import React from 'react';\n\nconst Introduction: React.FC = () => {\n  return (\n    <section id=\"introduction\" className=\"py-20 md:py-32 bg-neutral-900\">\n      <div className=\"container mx-auto px-6 md:px-12\">\n        <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">INTRODUCTION</h2>\n        <p className=\"font-noto text-lg text-center mb-12\">はじめに</p>\n        <div className=\"max-w-4xl mx-auto\">\n          <h3 className=\"font-noto text-2xl md:text-4xl font-bold leading-relaxed mb-8\">\n            まだまだ知らない物語がそこにある。\n          </h3>\n          <p className=\"font-noto text-base md:text-lg leading-loose text-neutral-300\">\n            実話を基に楽曲制作・映像制作を行うTrue Story【実話の物語】は、2022年にスタートしました。<br />\n            誰かの実話で、誰かが歌い、誰かが演じます。<br />\n            決まったマニュアルはありません。<br />\n            ０（スタート）状態から、多くの支援をいただき、制作関係者が100（完成）にします。<br />\n            だからこそ、美しいストーリーが完成します。<br />\n            2026年夏、どのような作品が出来上がるのかまだ誰も知りません。<br />\n            私たちは挑戦します！\n          </p>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Introduction;"],"names":[],"mappings":";;;;;;AAEA,MAAM,eAAyB;IAC7B,qBACE,6LAAC;QAAQ,IAAG;QAAe,WAAU;kBACnC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoE;;;;;;8BAClF,6LAAC;oBAAE,WAAU;8BAAsC;;;;;;8BACnD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAgE;;;;;;sCAG9E,6LAAC;4BAAE,WAAU;;gCAAgE;8CACxB,6LAAC;;;;;gCAAK;8CACpC,6LAAC;;;;;gCAAK;8CACX,6LAAC;;;;;gCAAK;8CACmB,6LAAC;;;;;gCAAK;8CAC1B,6LAAC;;;;;gCAAK;8CACK,6LAAC;;;;;gCAAK;;;;;;;;;;;;;;;;;;;;;;;;AAOlD;KAvBM;uCAyBS","debugId":null}},
    {"offset": {"line": 1481, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Message.tsx"],"sourcesContent":["import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faYoutube, faInstagram } from '@fortawesome/free-brands-svg-icons';\n\nconst Message: React.FC = () => {\n  return (\n    <section id=\"message\" className=\"py-20 md:py-32 bg-neutral-900 \">\n      <div className=\"container mx-auto px-6 md:px-12\">\n        <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">MESSAGE</h2>\n        <p className=\"font-noto text-lg text-center mb-12\">代表のメッセージ</p>\n        <div className=\"max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8 md:gap-12 mb-16\">\n          {/* 1人目 */}\n          <div className=\"md:w-1/3 flex justify-center\">\n            <img\n              src=\"https://npxqbgysjxykcykaiutm.supabase.co/storage/v1/object/sign/img/00_hiroki%20ando.JPEG?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8xOGQ3YjhmZS03YWM0LTQyYWQtOGQyNS03YzU3Y2NjNjExNzciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJpbWcvMDBfaGlyb2tpIGFuZG8uSlBFRyIsImlhdCI6MTc1NDI4NjI1MCwiZXhwIjo0ODc2MzUwMjUwfQ.pXSJY60xvZ3dxQxFWt1VHHT5SaKfGS7-rTS12JlCj1c\"\n              alt=\"アーティスト写真\"\n              className=\"rounded-full shadow-lg w-64 h-64 object-cover\"\n            />\n          </div>\n          <div className=\"md:w-2/3\">\n            <p className=\"font-noto text-base leading-loose text-neutral-300 mb-6\">\n              2022年のTrue Story【実話の物語】がスタートした当時、私はまだ大学生でした。映像制作が好きという気持ちだけで始めたこのプロジェクトは、多くの方に支えられて今に至ります。\n            </p>\n            <p className=\"font-noto text-base leading-loose text-neutral-300 mb-6\">\n              このTrue Story【実話の物語】は、その名の通り、実際にあった実話を基に制作します。決して同じストーリーは出てきません。\n            </p>\n            <p className=\"font-noto text-base leading-loose text-neutral-300\">\n              だからこそ、我々制作関係者だけではなく、音楽を聴いてくれる皆さんと、映像を観てくれる皆さんと一緒にストーリーを創りたいと思っています！\n            </p>\n            <div className=\"flex items-center justify-end mt-6\">\n              <a\n                href=\"https://www.instagram.com/hiropon_films/\" // Placeholder link\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"Instagram\"\n                className=\"text-white hover:text-neutral-400 transition-colors mr-3\"\n              >\n                <FontAwesomeIcon icon={faInstagram} className=\"w-5 h-5 align-middle\" />\n              </a>\n              <a\n                href=\"https://www.youtube.com/@HIROPONFilms\" // Placeholder link\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"YouTube\"\n                className=\"text-white hover:text-neutral-400 transition-colors mr-3\"\n              >\n                <FontAwesomeIcon icon={faYoutube} className=\"w-5 h-5 align-middle\" />\n              </a>\n              <p className=\"font-noto font-bold text-lg leading-none\">Hiroki Ando</p>\n            </div>\n          </div>\n        </div>\n        {/* 2人目 */}\n        <div className=\"max-w-4xl mx-auto flex flex-col md:flex-row-reverse items-center gap-8 md:gap-12\">\n          <div className=\"md:w-1/3 flex justify-center\">\n            <img\n              src=\"https://npxqbgysjxykcykaiutm.supabase.co/storage/v1/object/sign/img/shoma.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8xOGQ3YjhmZS03YWM0LTQyYWQtOGQyNS03YzU3Y2NjNjExNzciLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJpbWcvc2hvbWEuanBnIiwiaWF0IjoxNzU1OTY3ODQ5LCJleHAiOjQ4NzgwMzE4NDl9.xs2gvkKeEU7hEU4Rh-qKyTrLHIUc7Dkq4d8yfW6dX4s\"\n              alt=\"2人目アーティスト写真\"\n              className=\"rounded-full shadow-lg w-64 h-64 object-cover\"\n            />\n          </div>\n          <div className=\"md:w-2/3\">\n            <p className=\"font-noto text-base leading-loose text-neutral-300 mb-6\">\n              日常で感じる喜び、悲しみ、憎しみ、怒り。\n              <br />\n              そんな気持ちを音に想いを込めて、物語とともにお届けしたいと思います。\n              <br />\n              皆さまの心に少しでも響いてもらえたら幸いです。\n              <br />\n              応援よろしくお願いいたします。\n            </p>\n            <div className=\"flex items-center justify-end mt-6\">\n              <a\n                href=\"https://www.instagram.com/sho_m.pf/\" // Placeholder link\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"Instagram\"\n                className=\"text-white hover:text-neutral-400 transition-colors mr-3\"\n              >\n                <FontAwesomeIcon icon={faInstagram} className=\"w-5 h-5 align-middle\" />\n              </a>\n              <a\n                href=\"https://www.youtube.com/@ShomaPiano\" // Placeholder link\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                aria-label=\"YouTube\"\n                className=\"text-white hover:text-neutral-400 transition-colors mr-3\"\n              >\n                <FontAwesomeIcon icon={faYoutube} className=\"w-5 h-5 align-middle\" />\n              </a>\n              <p className=\"font-noto font-bold text-lg leading-none\">翔馬-Shoma</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Message;"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAEA,MAAM,UAAoB;IACxB,qBACE,6LAAC;QAAQ,IAAG;QAAU,WAAU;kBAC9B,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAoE;;;;;;8BAClF,6LAAC;oBAAE,WAAU;8BAAsC;;;;;;8BACnD,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;;;;;;sCAGd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAA0D;;;;;;8CAGvE,6LAAC;oCAAE,WAAU;8CAA0D;;;;;;8CAGvE,6LAAC;oCAAE,WAAU;8CAAqD;;;;;;8CAGlE,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,QAAO;4CACP,KAAI;4CACJ,cAAW;4CACX,WAAU;sDAEV,cAAA,6LAAC,4LAAe;gDAAC,MAAM,2LAAW;gDAAE,WAAU;;;;;;;;;;;sDAEhD,6LAAC;4CACC,MAAK;4CACL,QAAO;4CACP,KAAI;4CACJ,cAAW;4CACX,WAAU;sDAEV,cAAA,6LAAC,4LAAe;gDAAC,MAAM,yLAAS;gDAAE,WAAU;;;;;;;;;;;sDAE9C,6LAAC;4CAAE,WAAU;sDAA2C;;;;;;;;;;;;;;;;;;;;;;;;8BAK9D,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;;;;;;sCAGd,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;;wCAA0D;sDAErE,6LAAC;;;;;wCAAK;sDAEN,6LAAC;;;;;wCAAK;sDAEN,6LAAC;;;;;wCAAK;;;;;;;8CAGR,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,QAAO;4CACP,KAAI;4CACJ,cAAW;4CACX,WAAU;sDAEV,cAAA,6LAAC,4LAAe;gDAAC,MAAM,2LAAW;gDAAE,WAAU;;;;;;;;;;;sDAEhD,6LAAC;4CACC,MAAK;4CACL,QAAO;4CACP,KAAI;4CACJ,cAAW;4CACX,WAAU;sDAEV,cAAA,6LAAC,4LAAe;gDAAC,MAAM,yLAAS;gDAAE,WAAU;;;;;;;;;;;sDAE9C,6LAAC;4CAAE,WAAU;sDAA2C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOtE;KA7FM;uCA+FS","debugId":null}},
    {"offset": {"line": 1767, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/utils/authUtils.ts"],"sourcesContent":["import { supabase } from '../lib/supabaseClient';\n\nexport const generateYears = () => {\n  const currentYear = new Date().getFullYear();\n  const years = [];\n  for (let year = currentYear; year >= currentYear - 100; year--) {\n    years.push(year);\n  }\n  return years;\n};\n\nexport const generateMonths = () => {\n  return Array.from({ length: 12 }, (_, i) => i + 1);\n};\n\nexport const generateDays = (year?: string, month?: string) => {\n  if (!year || !month) return Array.from({ length: 31 }, (_, i) => i + 1);\n  \n  const lastDay = new Date(parseInt(year), parseInt(month), 0).getDate();\n  return Array.from({ length: lastDay }, (_, i) => i + 1);\n};\n\nexport const formatBirthDate = (year?: string, month?: string, day?: string) => {\n  if (!year || !month || !day) return '';\n  const formattedMonth = month.padStart(2, '0');\n  const formattedDay = day.padStart(2, '0');\n  return `${year}-${formattedMonth}-${formattedDay}`;\n};\n\nexport const calculatePasswordStrength = (password: string): { strength: number; message: string } => {\n  if (!password) return { strength: 0, message: '' };\n\n  let score = 0;\n  \n  if (password.length >= 8) score += 1;\n  if (password.length >= 12) score += 1;\n  if (/[A-Z]/.test(password)) score += 1;\n  if (/[a-z]/.test(password)) score += 1;\n  if (/[0-9]/.test(password)) score += 1;\n  if (/[^A-Za-z0-9]/.test(password)) score += 1;\n  \n  const normalizedScore = Math.min(3, Math.floor(score / 2));\n  \n  let message = '';\n  if (normalizedScore === 0) message = '弱いパスワード';\n  else if (normalizedScore === 1) message = '普通のパスワード';\n  else if (normalizedScore === 2) message = '強いパスワード';\n  else message = '非常に強いパスワード';\n  \n  return { strength: normalizedScore, message };\n};\n\nexport const checkMemberExists = async (userId: string) => {\n  try {\n    // まず個人ユーザーテーブルをチェック\n    const { data: individualMember } = await supabase\n      .from('individual_members')\n      .select('*')\n      .eq('auth_user_id', userId)\n      .limit(1)\n      .maybeSingle();\n\n    if (individualMember) {\n      return { ...individualMember, user_type: 'individual' };\n    }\n\n    // 次に企業ユーザーテーブルをチェック\n    const { data: sponsorMember } = await supabase\n      .from('sponsor_members')\n      .select('*')\n      .eq('auth_user_id', userId)\n      .limit(1)\n      .maybeSingle();\n\n    if (sponsorMember) {\n      return { ...sponsorMember, user_type: 'sponsor' };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error in checkMemberExists:', error);\n    return null;\n  }\n};\n\nexport const getRedirectURL = () => {\n  // 1) ローカル開発用に明示的な env を優先（.env.local に設定してください）\n  if (typeof process !== 'undefined' && process?.env?.REACT_APP_SITE_URL) {\n    return String(process.env.REACT_APP_SITE_URL).replace(/\\/$/, '');\n  }\n\n  // 2) Next.js の process.env をチェック\n  if (typeof process !== 'undefined' && process?.env?.NEXT_PUBLIC_SITE_URL) {\n    return String(process.env.NEXT_PUBLIC_SITE_URL).replace(/\\/$/, '');\n  }\n\n  // 3) ブラウザ実行時かつローカルホストなら現在の origin を最優先（ポートも含む）\n  if (typeof window !== 'undefined' && window.location && window.location.hostname) {\n    const hostname = window.location.hostname;\n    const origin = String(window.location.origin).replace(/\\/$/, '');\n    if (\n      hostname.includes('localhost') ||\n      hostname.startsWith('127.') ||\n      hostname === '::1'\n    ) {\n      return origin;\n    }\n  }\n\n  // 4) 最後のフォールバックは本番URL\n  return 'https://www.truestory.jp';\n};\n\nexport const handleGoogleAuth = async () => {\n  const base = getRedirectURL();\n  const redirectTo = `${base.replace(/\\/$/, '')}/users`; // 認証後は /users に戻す\n\n  // デバッグログを強化：Supabase に渡す redirectTo を明示表示します\n  console.info('[authUtils] Google auth redirectTo ->', redirectTo);\n\n  try {\n    const { error } = await supabase.auth.signInWithOAuth({\n      provider: 'google',\n      options: {\n        redirectTo: redirectTo,\n        queryParams: {\n          prompt: 'select_account'\n        }\n      }\n    });\n\n    if (error) {\n      console.error('Google auth error:', error);\n    }\n  } catch (err) {\n    console.error('Unexpected error during Google auth:', err);\n  }\n};\n\n// 追加: 冗長なサインアウト処理を共通化\nexport const robustSignOut = async () => {\n  try {\n    const { error } = await supabase.auth.signOut();\n    if (error) {\n      console.warn('Supabase signOut returned error:', error);\n      // ここではエラーをそのまま続行してフォールバック処理へ進める\n    }\n  } catch (err) {\n    console.warn('Supabase signOut threw error:', err);\n    // 続行してフォールバック処理へ\n  } finally {\n    // localStorage はブラウザ環境でのみ利用可能なため、存在チェックを行う\n    if (typeof window !== 'undefined' && window.localStorage) {\n      try {\n        Object.keys(window.localStorage).forEach((k) => {\n          const key = String(k);\n          const lower = key.toLowerCase();\n          // supabase-js v2 uses keys like \"sb-<project_ref>-auth-token\"\n          // older versions used \"supabase.\" prefix. Remove either.\n          if (lower.startsWith('sb-') || lower.startsWith('supabase.')) {\n            window.localStorage.removeItem(key);\n          }\n        });\n      } catch (e) {\n        console.warn('Failed to clear supabase localStorage items.', e);\n      }\n    }\n\n    // The redirect fallback was removed because it was causing a 405 error\n    // by making a GET request to a POST-only endpoint.\n    // supabase.auth.signOut() should be sufficient.\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1946, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/LoginErrorModal.tsx"],"sourcesContent":["import React from 'react';\nimport { XCircle } from 'lucide-react';\n\ntype LoginErrorModalProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  message?: string;\n  onConfirm?: () => void;\n};\n\nconst LoginErrorModal: React.FC<LoginErrorModalProps> = ({ isOpen, onClose, message, onConfirm }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-neutral-800 rounded-lg p-8 max-w-md mx-4 relative\">\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-neutral-400 hover:text-white\"\n        >\n          <XCircle size={24} />\n        </button>\n        \n        <div className=\"text-center\">\n          <div className=\"mb-4\">\n            <XCircle className=\"w-16 h-16 text-red-500 mx-auto\" />\n          </div>\n          <h2 className=\"text-xl font-bold text-white mb-4\">\n            ログインエラー\n          </h2>\n          <p className=\"text-neutral-300 mb-6\">\n            {message}\n          </p>\n          <div className=\"space-y-3\">\n            <button\n              onClick={onConfirm || onClose}\n              className=\"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md transition duration-200\"\n            >\n              閉じる\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginErrorModal;\n"],"names":[],"mappings":";;;;;AACA;;;AASA,MAAM,kBAAkD,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,EAAE;IAC9F,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,0NAAO;wBAAC,MAAM;;;;;;;;;;;8BAGjB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,0NAAO;gCAAC,WAAU;;;;;;;;;;;sCAErB,6LAAC;4BAAG,WAAU;sCAAoC;;;;;;sCAGlD,6LAAC;4BAAE,WAAU;sCACV;;;;;;sCAEH,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC;gCACC,SAAS,aAAa;gCACtB,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;KAnCM;uCAqCS","debugId":null}},
    {"offset": {"line": 2054, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/IndividualAuthForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Mail, X } from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { AuthFormData, AuthFormProps } from '../types/auth';\nimport {\n  generateYears,\n  generateMonths,\n  generateDays,\n  formatBirthDate,\n  calculatePasswordStrength,\n  handleGoogleAuth, // 追加\n  checkMemberExists, // 追加\n  robustSignOut // 追加\n} from '../utils/authUtils';\nimport { useRouter } from 'next/navigation'; // 変更\nimport LoginErrorModal from './LoginErrorModal'; // 追加\n\n// 新しいメンバーIDを生成する関数\nconst generateNewMemberId = async () => {\n  const ID_PREFIX = 'TS2025';\n  // 1. 'TS2025'で始まるIDの中から、最後に登録されたものを降順で取得する\n  const { data, error } = await supabase\n    .from('member_ids_view')\n    .select('member_id')\n    .like('member_id', `${ID_PREFIX}%`)\n    .order('member_id', { ascending: false })\n    .limit(1)\n    .maybeSingle(); // テーブルが空の場合もエラーにしない\n\n  if (error) {\n    console.error('Error fetching latest member_id:', error);\n    // エラーの場合はフォールバックとしてランダムなIDを生成\n    const timestamp = Date.now();\n    const random = Math.floor(Math.random() * 1000);\n    return `TS_ERR${timestamp}${random}`;\n  }\n\n  let newIdNumber = 1;\n  if (data && data.member_id) {\n    // IDの数字部分を抽出して、次の番号を計算\n    const lastIdNumber = parseInt(data.member_id.substring(ID_PREFIX.length), 10);\n    if (!isNaN(lastIdNumber)) {\n      newIdNumber = lastIdNumber + 1;\n    }\n  }\n\n  // 2. 新しいIDを生成 (TS2025 + 4桁の連番)\n  const paddedId = String(newIdNumber).padStart(4, '0');\n  return `${ID_PREFIX}${paddedId}`;\n};\n\nconst IndividualAuthForm: React.FC<AuthFormProps> = ({ onAuthSuccess }) => {\n  const [authMode, setAuthMode] = useState<'signin' | 'signup'>('signin');\n  const [showAdditionalInfo, setShowAdditionalInfo] = useState(false);\n  const [showEmailConfirmModal, setShowEmailConfirmModal] = useState(false);\n  const [authenticatedUser, setAuthenticatedUser] = useState<any>(null);\n  const [formData, setFormData] = useState<AuthFormData>({\n    email: '',\n    password: '',\n    lastName: '',\n    firstName: '',\n    birthYear: '',\n    birthMonth: '',\n    birthDay: '',\n    gender: '',\n    phoneNumber: '',\n    nickname: '',\n  });\n  const [googleUser, setGoogleUser] = useState<any>(null); // 追加\n  const [isCheckingMember, setIsCheckingMember] = useState(false); // 追加\n  const [showLoginErrorModal, setShowLoginErrorModal] = useState(false); // 追加\n  const [loginErrorMessage, setLoginErrorMessage] = useState(''); // 追加\n  const router = useRouter(); // 追加\n\n  const passwordStrength = calculatePasswordStrength(formData.password || '');\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    \n    if (name === 'email') {\n      const filteredValue = value.replace(/[^\\w@.-]/g, '');\n      setFormData(prev => ({ ...prev, [name]: filteredValue }));\n    } else if (name === 'password') {\n      const filteredValue = value.replace(/[^a-zA-Z0-9]/g, '');\n      setFormData(prev => ({ ...prev, [name]: filteredValue }));\n    } else if (name === 'phoneNumber') {\n      const filteredValue = value.replace(/[^0-9]/g, '');\n      setFormData(prev => ({ ...prev, [name]: filteredValue }));\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n  };\n\n  // Google認証処理 (AuthFormから移植)\n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        console.log('IndividualAuthForm - 認証状態の変更:', event, session?.user?.id);\n        \n        if (event === 'SIGNED_IN' && session?.user) {\n          setIsCheckingMember(true);\n          setGoogleUser(session.user);\n\n          // タイムアウト処理\n          const timeoutId = setTimeout(() => {\n            if (isCheckingMember) {\n              console.warn('メンバーシップチェックがタイムアウトしました。');\n              robustSignOut();\n              setLoginErrorMessage('タイムアウトしました。もう一度お試しください。');\n              setShowLoginErrorModal(true);\n              setIsCheckingMember(false);\n              router.push('/users'); // タイムアウト時はユーザータイプ選択に戻る\n            }\n          }, 15000); // 15秒\n\n          try {\n            const memberExists = await checkMemberExists(session.user.id);\n            console.log('メンバーシップチェック結果:', memberExists);\n\n            if (memberExists) {\n              // 既存メンバーの場合\n              console.log('既存メンバーとしてログインします。');\n              onAuthSuccess(session.user, 'individual');\n            } else {\n              // 新規メンバーの場合\n              console.log('新規メンバー登録フローを開始します。');\n              setShowAdditionalInfo(true);\n            }\n          } catch (error) {\n            console.error('メンバーシップチェック中にエラー:', error);\n            robustSignOut();\n            setLoginErrorMessage('エラーが発生しました。もう一度お試しください。');\n            setShowLoginErrorModal(true);\n            router.push('/users');\n          } finally {\n            clearTimeout(timeoutId);\n            setIsCheckingMember(false);\n          }\n        }\n      }\n    );\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [onAuthSuccess, router]);\n\n  const handleGoogleSignIn = async () => {\n    await handleGoogleAuth();\n  };\n\n  // 初回ロード時の現在セッションチェックも追加 (AuthFormから移植)\n  useEffect(() => {\n    const checkCurrentSession = async () => {\n      try {\n        if (\n          typeof window !== 'undefined' &&\n          window.location.hash &&\n          (window.location.hash.includes('access_token') ||\n            window.location.hash.includes('error') ||\n            window.location.hash.includes('provider_token'))\n        ) {\n          console.log('IndividualAuthForm -  URLハッシュからの認証コールバック処理中...');\n          try {\n            const { error } = await supabase.auth.getSession();\n            if (error) {\n              console.warn('getSession error:', error);\n            }\n          } catch (e) {\n            console.error('Error calling getSession:', e);\n          }\n          try {\n            window.history.replaceState({}, document.title, window.location.pathname + window.location.search);\n          } catch (e) {\n            console.warn('Failed to replace history state', e);\n          }\n        }\n      } catch (e) {\n        console.error('Error handling auth callback hash:', e);\n      }\n\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        const user = session.user;\n        const isGoogleAuth = user.app_metadata?.provider === 'google';\n        \n        if (isGoogleAuth) {\n          console.log('IndividualAuthForm - 既存のGoogleセッションが見つかりました:', user.id);\n          setIsCheckingMember(true);\n          \n          const existingMember = await checkMemberExists(user.id);\n          \n          if (!existingMember) {\n            console.log('IndividualAuthForm - 既存のGoogleセッションにメンバー記録が見つかりませんでした。追加情報フォームを表示します。');\n            setGoogleUser(user);\n            setFormData(prev => ({\n              ...prev,\n              email: user.email || '',\n              nickname: user.user_metadata?.full_name || user.user_metadata?.name || ''\n            }));\n            setShowAdditionalInfo(true);\n          } else if (existingMember.user_type === 'individual') {\n            console.log('IndividualAuthForm - 既存の個人メンバーが見つかりました。ログインを続行します。');\n            const userName = existingMember.nickname || `${existingMember.last_name} ${existingMember.first_name}`;\n            onAuthSuccess({ ...user, name: userName }, 'individual');\n            setIsCheckingMember(false); // Ensure loading state is cleared\n            return; // Important: Exit after calling onAuthSuccess\n          } else {\n            console.log('IndividualAuthForm - Google認証ユーザーは個人会員ではありません。/usersにリダイレクトします。');\n            await robustSignOut();\n            router.push('/users');\n          }\n          \n          setIsCheckingMember(false);\n        }\n      }\n    };\n\n    checkCurrentSession();\n  }, [onAuthSuccess, router]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      if (authMode === 'signin') {\n        await handleSignIn(e);\n      } else {\n        await handleSignUp(e);\n      }\n    } catch (error) {\n      console.error('Form submission error:', error);\n      setLoginErrorMessage('フォームの送信中にエラーが発生しました。');\n      setShowLoginErrorModal(true);\n    }\n  };\n\n  const handleSignUp = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const { data, error } = await supabase.auth.signUp({\n        email: formData.email,\n        password: formData.password ?? '',\n      });\n\n      if (error) {\n        console.error('Signup error:', error.message);\n        setLoginErrorMessage(error.message);\n        setShowLoginErrorModal(true);\n        return;\n      }\n\n      if (data.user) {\n        setAuthenticatedUser(data.user);\n        setShowEmailConfirmModal(true);\n      }\n    } catch (error) {\n      console.error('Signup process error:', error);\n      setLoginErrorMessage('サインアップ処理中に予期せぬエラーが発生しました。');\n      setShowLoginErrorModal(true);\n    }\n  };\n\n  const handleSignIn = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: formData.email,\n        password: formData.password ?? '',\n      });\n\n      if (error) {\n        console.error('Signin error:', error.message);\n        setLoginErrorMessage(error.message);\n        setShowLoginErrorModal(true);\n        return;\n      }\n\n      if (data.user) {\n        const memberExists = await checkMemberExists(data.user.id);\n        if (memberExists) {\n          onAuthSuccess(data.user, 'individual');\n        } else {\n          // メール認証は済んでいるが、メンバー情報がない場合\n          setAuthenticatedUser(data.user);\n          setShowAdditionalInfo(true);\n        }\n      }\n    } catch (error) {\n      console.error('Signin process error:', error);\n      setLoginErrorMessage('サインイン処理中に予期せぬエラーが発生しました。');\n      setShowLoginErrorModal(true);\n    }\n  };\n\n  const handleBackToSelection = () => {\n    router.push('/users');\n  };\n\n  const handleAdditionalInfoSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    const maxAttempts = 5;\n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n      try {\n        if (!googleUser && !authenticatedUser) {\n          throw new Error('認証されたユーザー情報が見つかりません。');\n        }\n        const targetUser = googleUser || authenticatedUser;\n\n        const birthDate = formatBirthDate(formData.birthYear, formData.birthMonth, formData.birthDay);\n        const memberId = await generateNewMemberId();\n\n        const { error: insertError } = await supabase.from('individual_members').insert({\n          member_id: memberId,\n          auth_user_id: targetUser.id,\n          last_name: formData.lastName,\n          first_name: formData.firstName,\n          birth_date: birthDate,\n          gender: formData.gender,\n          email: targetUser.email,\n          phone_number: formData.phoneNumber,\n          nickname: formData.nickname,\n        });\n\n        if (insertError) {\n          if (insertError.code === '23505' && attempt < maxAttempts) {\n            console.warn(`Attempt ${attempt}: Duplicate member_id ${memberId}. Retrying...`);\n            await new Promise(resolve => setTimeout(resolve, Math.random() * 200 + 100));\n            continue; // Go to next attempt\n          }\n          throw insertError;\n        }\n\n        // --- SUCCESS ---\n        const userName = formData.nickname || `${formData.lastName || ''} ${formData.firstName || ''}`.trim();\n        setShowAdditionalInfo(false);\n        setGoogleUser(null);\n        setAuthenticatedUser(null);\n\n        const pendingSubmission = localStorage.getItem('pendingStorySubmission');\n        if (pendingSubmission) {\n          localStorage.removeItem('pendingStorySubmission');\n          router.push('/#truestoryform');\n        } else {\n          onAuthSuccess(targetUser, 'individual');\n        }\n        return; // Exit function on success\n\n      } catch (err) {\n        console.error(`Attempt ${attempt} failed:`, err);\n        if (attempt >= maxAttempts) {\n          // If all attempts fail, show a final error\n          setLoginErrorMessage('メンバーの登録に失敗しました。時間をおいて再度お試しください。');\n          setShowLoginErrorModal(true);\n        }\n      }\n    }\n  };\n\n  const handleCancelGoogleAuth = async () => {\n    await robustSignOut();\n    setShowAdditionalInfo(false);\n    setGoogleUser(null);\n    router.push('/users');\n  };\n\n  const closeEmailConfirmModal = () => {\n    setShowEmailConfirmModal(false);\n    setFormData({\n      email: '',\n      password: '',\n      lastName: '',\n      firstName: '',\n      birthYear: '',\n      birthMonth: '',\n      birthDay: '',\n      gender: '',\n      phoneNumber: '',\n      nickname: '',\n    });\n    setAuthMode('signin');\n  };\n\n  if (isCheckingMember) {\n    return (\n      <div className=\"max-w-md mx-auto p-8\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-white mb-4\">認証確認中...</h2>\n          <p className=\"text-neutral-300 mb-6\">しばらくお待ちください</p>\n          <div className=\"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto\"></div>\n          <p className=\"text-xs text-neutral-400 mt-4\">5秒以上かかる場合は自動的にリセットされます</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (showEmailConfirmModal) {\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n        <div className=\"bg-neutral-800 rounded-lg p-8 max-w-md mx-4 relative\">\n          <button\n            onClick={closeEmailConfirmModal}\n            className=\"absolute top-4 right-4 text-neutral-400 hover:text-white\"\n          >\n            <X size={20} />\n          </button>\n          \n          <div className=\"text-center\">\n            <div className=\"mb-4\">\n              <Mail className=\"w-16 h-16 text-green-500 mx-auto\" />\n            </div>\n            <h2 className=\"text-xl font-bold text-white mb-4\">\n              確認メールを送信しました\n            </h2>\n            <p className=\"text-neutral-300 mb-6\">\n              {formData.email} に確認メールを送信しました。<br />\n              メール内のリンクをクリックしてアカウントを有効化してから、再度ログインしてください。\n            </p>\n            <div className=\"space-y-3\">\n              <button\n                onClick={closeEmailConfirmModal}\n                className=\"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition duration-200\"\n              >\n                ログイン画面に戻る\n              </button>\n              <p className=\"text-xs text-neutral-400\">\n                メールが届かない場合は、迷惑メールフォルダもご確認ください。\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (showAdditionalInfo) {\n    return (\n      <div className=\"max-w-md mx-auto\">\n        <div className=\"mb-6\">\n          <h3 className=\"text-xl font-bold text-white mb-2\">追加情報の入力</h3>\n          <p className=\"text-neutral-300 text-sm\">\n            ログインが完了しました。会員登録を完了するために、以下の情報を入力してください。\n          </p>\n        </div>\n\n        <form onSubmit={handleAdditionalInfoSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                苗字 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"lastName\"\n                value={formData.lastName}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"山田\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                名前 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"firstName\"\n                value={formData.firstName}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"太郎\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              ニックネーム <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              name=\"nickname\"\n              value={formData.nickname}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"たろう\"\n            />\n            <p className=\"text-xs text-neutral-400 mt-2\">サイト上で表示される名前です</p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              生年月日 <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              <select\n                name=\"birthYear\"\n                value={formData.birthYear}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">年</option>\n                {generateYears().map(year => (\n                  <option key={year} value={year}>{year}年</option>\n                ))}\n              </select>\n              \n              <select\n                name=\"birthMonth\"\n                value={formData.birthMonth}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">月</option>\n                {generateMonths().map(month => (\n                  <option key={month} value={month}>{month}月</option>\n                ))}\n              </select>\n              \n              <select\n                name=\"birthDay\"\n                value={formData.birthDay}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n                disabled={!formData.birthYear || !formData.birthMonth}\n              >\n                <option value=\"\">日</option>\n                {generateDays(formData.birthYear, formData.birthMonth).map(day => (\n                  <option key={day} value={day}>{day}日</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              性別 <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              name=\"gender\"\n              value={formData.gender}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n              required\n            >\n              <option value=\"\">選択してください</option>\n              <option value=\"男性\">男性</option>\n              <option value=\"女性\">女性</option>\n              <option value=\"その他\">その他</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              携帯電話番号 <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"tel\"\n              name=\"phoneNumber\"\n              value={formData.phoneNumber}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"09012345678\"\n              pattern=\"[0-9]*\"\n              inputMode=\"numeric\"\n            />\n          </div>\n\n          <div className=\"flex gap-4 pt-2\">\n            <button\n              type=\"button\"\n              onClick={handleCancelGoogleAuth}\n              className=\"flex-1 bg-neutral-700 hover:bg-neutral-600 text-white px-5 py-3 rounded-md text-base transition duration-200\"\n            >\n              キャンセル\n            </button>\n            <button\n              type=\"submit\"\n              className=\"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-5 py-3 rounded-md text-base transition duration-200\"\n            >\n              登録を完了する\n            </button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      {/* Googleログインボタンをメールフォームの上に移動 */}\n      <button\n        type=\"button\"\n        onClick={handleGoogleAuth}\n        className=\"w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-800 flex items-center justify-center gap-3 px-5 py-3 rounded-md transition duration-200\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\n          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\n          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\n          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\n          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\n        </svg>\n        <span className=\"text-base\">Googleでログイン</span>\n      </button>\n\n      <div className=\"relative my-6\">\n        <div className=\"absolute inset-0 flex items-center\">\n          <div className=\"w-full border-t border-neutral-600\"></div>\n        </div>\n        <div className=\"relative flex justify-center text-sm\">\n          <span className=\"px-4 bg-neutral-900 text-neutral-400\">または</span>\n        </div>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n          メールアドレス <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleInputChange}\n          className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n          required\n          placeholder=\"example@email.com\"\n        />\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n          パスワード <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"password\"\n          name=\"password\"\n          value={formData.password}\n          onChange={handleInputChange}\n          className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n          required\n          minLength={6}\n          placeholder=\"英数字6文字以上\"\n        />\n        \n        {formData.password && authMode === 'signup' && (\n          <div className=\"mt-3\">\n            <div className=\"flex w-full h-2 bg-neutral-600 rounded-full overflow-hidden\">\n              <div \n                className={`h-full ${\n                  passwordStrength.strength === 0 ? 'w-1/3 bg-red-500' : \n                  passwordStrength.strength === 1 ? 'w-2/3 bg-yellow-500' : \n                  'w-full bg-green-500'\n                }`} \n              />\n            </div>\n            <p className=\"text-xs text-neutral-300 mt-2\">\n              {passwordStrength.message}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {authMode === 'signup' && (\n        <>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                苗字 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"lastName\"\n                value={formData.lastName}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"山田\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                名前 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"firstName\"\n                value={formData.firstName}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"太郎\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              ニックネーム <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              name=\"nickname\"\n              value={formData.nickname}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"たろう\"\n            />\n            <p className=\"text-xs text-neutral-400 mt-2\">サイト上で表示される名前です</p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              生年月日 <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              <select\n                name=\"birthYear\"\n                value={formData.birthYear}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">年</option>\n                {generateYears().map(year => (\n                  <option key={year} value={year}>{year}年</option>\n                ))}\n              </select>\n              \n              <select\n                name=\"birthMonth\"\n                value={formData.birthMonth}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">月</option>\n                {generateMonths().map(month => (\n                  <option key={month} value={month}>{month}月</option>\n                ))}\n              </select>\n              \n              <select\n                name=\"birthDay\"\n                value={formData.birthDay}\n                onChange={handleInputChange}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n                disabled={!formData.birthYear || !formData.birthMonth}\n              >\n                <option value=\"\">日</option>\n                {generateDays(formData.birthYear, formData.birthMonth).map(day => (\n                  <option key={day} value={day}>{day}日</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              性別 <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              name=\"gender\"\n              value={formData.gender}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n              required\n            >\n              <option value=\"\">選択してください</option>\n              <option value=\"男性\">男性</option>\n              <option value=\"女性\">女性</option>\n              <option value=\"その他\">その他</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              携帯電話番号 <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"tel\"\n              name=\"phoneNumber\"\n              value={formData.phoneNumber}\n              onChange={handleInputChange}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"09012345678\"\n              pattern=\"[0-9]*\"\n              inputMode=\"numeric\"\n            />\n          </div>\n        </>\n      )}\n\n      <button\n        type=\"submit\"\n        className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-5 py-3 rounded-md flex items-center justify-center gap-2 text-base transition duration-200\"\n      >\n        <Mail size={18} />\n        {authMode === 'signin' ? 'ログイン' : '登録する'}\n      </button>\n\n      <div className=\"text-center\">\n        <button\n          type=\"button\"\n          onClick={() => setAuthMode(authMode === 'signin' ? 'signup' : 'signin')}\n          className=\"text-blue-400 hover:text-blue-300 text-sm\"\n        >\n          {authMode === 'signin' ? 'アカウントをお持ちでない方はこちら' : 'すでにアカウントをお持ちの方はこちら'}\n        </button>\n      </div>\n\n      <LoginErrorModal\n        isOpen={showLoginErrorModal}\n        onClose={() => setShowLoginErrorModal(false)}\n        message={loginErrorMessage}\n        onConfirm={() => setShowLoginErrorModal(false)}\n      />\n    </form>\n  );\n};\n\nexport default IndividualAuthForm;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3696, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/GoogleAuthForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { AuthFormData } from '../types/auth';\nimport { \n  formatBirthDate,\n  generateYears,\n  generateMonths,\n  generateDays,\n  checkMemberExists\n} from '../utils/authUtils';\n\ninterface GoogleAuthFormProps {\n  onAuthSuccess: (email: string, name?: string) => void;\n}\n\nconst GoogleAuthForm: React.FC<GoogleAuthFormProps> = ({ onAuthSuccess }) => {\n  const [showAdditionalInfoForm, setShowAdditionalInfoForm] = useState(false);\n  const [googleUser, setGoogleUser] = useState<any>(null);\n  const [isCheckingMember, setIsCheckingMember] = useState(false);\n  const [formData, setFormData] = useState<AuthFormData>({\n    email: '',\n    password: '',\n    lastName: '',\n    firstName: '',\n    birthYear: '',\n    birthMonth: '',\n    birthDay: '',\n    gender: '',\n    phoneNumber: '',\n    nickname: '',\n  });\n\n  // Google認証処理\n  useEffect(() => {\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        if (event === 'SIGNED_IN' && session?.user) {\n          const user = session.user;\n          const isGoogleAuth = user.app_metadata?.provider === 'google';\n          \n          if (isGoogleAuth) {\n            setIsCheckingMember(true);\n            \n            try {\n              const existingMember = await checkMemberExists(user.id);\n              \n              if (!existingMember) {\n                // 会員情報がない場合は追加情報入力フォームを表示\n                setGoogleUser(user);\n                setFormData(prev => ({\n                  ...prev,\n                  email: user.email || '',\n                  nickname: ''\n                }));\n                setShowAdditionalInfoForm(true);\n              } else {\n                // 既存会員の場合はログイン完了\n                const userName = existingMember.nickname || `${existingMember.last_name} ${existingMember.first_name}`;\n                onAuthSuccess(user.email || '', userName);\n              }\n              \n              setIsCheckingMember(false);\n            } catch (error) {\n              console.error('Member check error:', error);\n              // エラー時は追加情報入力フォームを表示\n              setGoogleUser(user);\n              setFormData(prev => ({\n                ...prev,\n                email: user.email || '',\n                nickname: ''\n              }));\n              setShowAdditionalInfoForm(true);\n              setIsCheckingMember(false);\n            }\n          }\n        }\n      }\n    );\n\n    return () => subscription.unsubscribe();\n  }, [onAuthSuccess]);\n\n  const handleGoogleAuth = async () => {\n    try {\n      const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';\n      const redirectUrl = isLocal \n        ? 'http://localhost:5173/' \n        : 'https://www.truestory.jp/';\n\n      const { error } = await supabase.auth.signInWithOAuth({\n        provider: 'google',\n        options: {\n          redirectTo: redirectUrl,\n          queryParams: {\n            prompt: 'select_account'\n          }\n        }\n      });\n      \n      if (error) throw error;\n    } catch (error) {\n      console.error('Google authentication error:', error);\n      alert('Google認証エラーが発生しました');\n    }\n  };\n\n  if (isCheckingMember) {\n    return (\n      <div className=\"max-w-md mx-auto p-8\">\n        <div className=\"text-center\">\n          <h2 className=\"text-2xl font-bold text-white mb-4\">認証確認中...</h2>\n          <p className=\"text-neutral-300\">しばらくお待ちください</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (showAdditionalInfoForm) {\n    const handleAdditionalInfoSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n      e.preventDefault();\n      if (!googleUser?.email) {\n        console.error(\"Google user data is missing.\");\n        return;\n      }\n\n      try {\n        const { data: memberData, error: memberError } = await supabase\n          .rpc('generate_member_id')\n          .single();\n\n        if (memberError) throw memberError;\n\n        const birthDate = formatBirthDate(formData.birthYear, formData.birthMonth, formData.birthDay);\n\n        const { error: insertError } = await supabase\n          .from('individual_members')\n          .insert({\n            member_id: memberData,\n            auth_user_id: googleUser.id,\n            last_name: formData.lastName,\n            first_name: formData.firstName,\n            birth_date: birthDate,\n            gender: formData.gender,\n            email: googleUser.email,\n            phone_number: formData.phoneNumber,\n            nickname: formData.nickname,\n          });\n\n        if (insertError) throw insertError;\n\n        const userName = formData.nickname || `${formData.lastName} ${formData.firstName}`;\n        setShowAdditionalInfoForm(false);\n        setGoogleUser(null);\n        onAuthSuccess(googleUser.email, userName);\n      } catch (error) {\n        console.error('Error saving additional user info:', error);\n        alert('追加情報の保存でエラーが発生しました: ' + (error as Error).message);\n      }\n    };\n\n    return (\n      <div className=\"max-w-md mx-auto p-8\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-2xl font-bold text-white mb-4\">追加情報の入力</h2>\n          <p className=\"text-neutral-300 text-sm\">\n            Google認証が完了しました。会員登録を完了するために、以下の情報を入力してください。\n          </p>\n        </div>\n\n        <form onSubmit={handleAdditionalInfoSubmit} className=\"space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                苗字 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.lastName}\n                onChange={(e) => setFormData(prev => ({ ...prev, lastName: e.target.value }))}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"山田\"\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                名前 <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.firstName}\n                onChange={(e) => setFormData(prev => ({ ...prev, firstName: e.target.value }))}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n                required\n                placeholder=\"太郎\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              ニックネーム <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={formData.nickname}\n              onChange={(e) => setFormData(prev => ({ ...prev, nickname: e.target.value }))}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"たろう\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              生年月日 <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              <select\n                value={formData.birthYear}\n                onChange={(e) => setFormData(prev => ({ ...prev, birthYear: e.target.value, birthDay: '' }))}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">年</option>\n                {generateYears().map(year => (\n                  <option key={year} value={year}>{year}年</option>\n                ))}\n              </select>\n              \n              <select\n                value={formData.birthMonth}\n                onChange={(e) => setFormData(prev => ({ ...prev, birthMonth: e.target.value, birthDay: '' }))}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n              >\n                <option value=\"\">月</option>\n                {generateMonths().map(month => (\n                  <option key={month} value={month}>{month}月</option>\n                ))}\n              </select>\n              \n              <select\n                value={formData.birthDay}\n                onChange={(e) => setFormData(prev => ({ ...prev, birthDay: e.target.value }))}\n                className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n                required\n                disabled={!formData.birthYear || !formData.birthMonth}\n              >\n                <option value=\"\">日</option>\n                {generateDays(formData.birthYear, formData.birthMonth).map(day => (\n                  <option key={day} value={day}>{day}日</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              性別 <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              value={formData.gender}\n              onChange={(e) => setFormData(prev => ({ ...prev, gender: e.target.value }))}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white focus:border-green-500 focus:outline-none\"\n              required\n            >\n              <option value=\"\">選択してください</option>\n              <option value=\"男性\">男性</option>\n              <option value=\"女性\">女性</option>\n              <option value=\"その他\">その他</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-neutral-300 mb-2\">\n              携帯電話番号 <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"tel\"\n              value={formData.phoneNumber}\n              onChange={(e) => {\n                const value = e.target.value;\n                const filteredValue = value.replace(/[^\\d-]/g, '');\n                setFormData(prev => ({ ...prev, phoneNumber: filteredValue }));\n              }}\n              className=\"w-full bg-neutral-700 border border-neutral-600 rounded-md p-3 text-white placeholder-neutral-400 focus:border-green-500 focus:outline-none\"\n              required\n              placeholder=\"090-1234-5678\"\n            />\n          </div>\n\n          <button\n            type=\"submit\"\n            className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-5 py-3 rounded-md text-base transition duration-200\"\n          >\n            登録を完了する\n          </button>\n        </form>\n      </div>\n    );\n  }\n\n  // デフォルトの表示（Google認証ボタン）\n  return (\n    <div className=\"mb-6\">\n      <button\n        type=\"button\"\n        onClick={handleGoogleAuth}\n        className=\"w-full bg-white border border-gray-300 hover:bg-gray-50 text-gray-800 flex items-center justify-center gap-3 px-5 py-3 rounded-md transition duration-200\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\">\n          <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\" />\n          <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\" />\n          <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\" />\n          <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\" />\n        </svg>\n        <span className=\"text-base\">Googleでログイン</span>\n      </button>\n    </div>\n  );\n};\n\nexport default GoogleAuthForm;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4391, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/content/applicationNotes.json"],"sourcesContent":["{\"title\":\"応募に関する注意事項\",\"sections\":[{\"title\":\"1. 募集内容\",\"html\":\"<p>True Story【実話の物語】制作委員会は、2026年夏公開予定の３作品目に関して、皆さまからの「実際に体験した物語」を広く募集いたします。いただいた実話を基に、音楽と映像による作品を制作し、多くの方へ届けたいと考えています。</p><br/><p>今回募集する実話のテーマは、以下の５つとします。</p><ul><li>・学生時代の葛藤と成長</li><li>・恋愛や友情の転機</li><li>・家族との絆のすれ違い</li><li>・デジタル社会での葛藤</li><li>・夢と挫折、挑戦と成長</li></ul><br/><p>この中から１つのテーマを選択し、True Story【実話の物語】公式ホームページからご応募いただけます。</p><p>最終的に１つの実話を、True Story【実話の物語】制作委員会が決定を行います。</p>\"},{\"title\":\"2. 応募資格\",\"html\":\"<p>年齢：不問（ただし、未成年の場合は保護者の同意が必要となります）</p><p>国籍：不問（ただし、日本語での応募と会話ができる方に限ります）<br/>→制作委員会との打ち合わせに関してコミュニケーションが行える方であれば、問題ございません。</p><p>性別：不問</p>\"},{\"title\":\"3. 応募方法\",\"html\":\"<p>True Story【実話の物語】公式ホームページよりお申し込みください。<br/>公式ホームページ：<a href=\\\"https://www.truestory.jp/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" class=\\\"underline text-blue-500\\\">https://www.truestory.jp/</a></p><p>なお、申込送信後の修正等はシステム構築上行えませんので、あらかじめご了承ください。</p><p>※お手持ちのデバイスのメモ機能などに下書きをしていただき、コピー&amp;ペーストすることを推奨しております。</p>\"},{\"title\":\"4. 謝礼\",\"html\":\"<p>ご提供いただきました実話が採用された場合、謝礼として5,000円分のQUOカードを贈呈いたします。</p><p>※QUOカードは郵送させていただきますので、採用後に住所等をお伺いさせていただきます。</p>\"},{\"title\":\"5. 審査基準\",\"html\":\"<p>審査基準に関しては公開しておりません。</p><p>お問い合わせいただいてもお答えいたしかねますので、あらかじめご了承ください。</p><p>また、５つのテーマを設定しておりますが、最終的なテーマ等も募集段階では決まっておりません。</p><p>また、True Story【実話の物語】制作委員会としても、最終的にどのテーマで制作を行うのかわからない状態ですので、ご理解いただきますようお願い申し上げます。</p>\"},{\"title\":\"6. 採用インタビュー\",\"html\":\"<p>採用とさせていただきました応募者の方に関しましては、インタビューをさせていただきたく存じます。</p><p>実話から作品を制作するにあたり、必要な過程となりますので、ご理解いただけますと幸いです。</p><p>対面またはオンライン（ZOOMなど）でのインタビューとさせていただきます。</p><p>また、インタビューの様子等をドキュメンタリーやメイキング動画で一部使用させていただく場合がございます。実話に基づく作品となりますので、プライバシー等には最大限配慮させていただきますので、ご安心ください。</p><p class=\\\"text-xs\\\">※映像使用に関する承諾について<br/>採用後に実施するインタビューや取材の際、その様子を撮影させていただく場合があります。撮影した映像・写真・音声は、以下の目的に限り使用させていただきます。<br/>1. 本プロジェクト作品の制作過程を伝えるメイキング映像・ドキュメンタリー映像としての使用<br/>2. 公式ホームページ・SNS・パンフレット等における広報活動<br/>3. 将来開催される上映会やイベントでの紹介資料<br/>ただし、応募者ご本人のプライバシーや肖像権を尊重し、承諾をいただいた範囲を超えて使用することはありません。撮影データの使用に関しては、インタビュー時に改めて書面または同意フォームにてご確認・ご承諾いただきます。使用を希望されない場合は、その旨を事前にお申し出いただければ、採用結果や謝礼に影響することはありません。</p>\"},{\"title\":\"7. 秘密保持契約に関して\",\"html\":\"<p>採用いたしましたら、秘密保持契約書（NDA）を締結させていただきます。</p><p>秘密保持契約書締結の理由：実話に基づいた作品となるため、他者やSNS上で書き込みをされた場合に、ストーリー構成が漏洩してしまい、約1年の長期プロジェクトとなるTrue Story【実話の物語】の構成上、不利益が大きいため。秘密保持契約に関してご理解いただけますよう、お願い申し上げます。</p>\"},{\"title\":\"8. 個人情報の取り扱いに関して\",\"html\":\"<p>本規定において「個人情報」とは、個人情報保護法第2条に定める、氏名、住所、電話番号、メールアドレス、勤務先、役職名、その他特定の個人を識別できる情報をいいます。応募者から取得した個人情報は、本プロジェクトの運営に必要な範囲（応募の受付、採用者への連絡、謝礼の送付、インタビュー実施の調整等）に限り利用します。取得した個人情報は、応募者の同意なく第三者に提供することはありません。</p><p>ただし、法令に基づく場合を除きます。個人情報は、漏洩・紛失・改ざんを防止するために適切な安全管理措置を講じます。当制作委員会は、関係者にも適正な管理を義務付けます。提供いただいた個人情報は、利用目的達成後、一定期間（作品公開後6ヶ月で破棄）を経て適切に廃棄・消去します。</p>\"},{\"title\":\"連絡先等\",\"html\":\"<p>申し込み後の各種アナウンスや、True Story【実話の物語】制作委員会からのご連絡は登録いただいたメールアドレス宛に送信いたします。</p><p>メーリングリストを利用する、メール転送等でメールを見落とさないようご注意ください。</p><p>※ご提供いただきました実話が採用した場合は、個別に登録のメールアドレス宛にご連絡させていただきます。</p><p>「info@truestory.jp」からのアドレスを受信できるようにあらかじめ設定をお願いいたします。</p><p>実話の送信確定後、マイページより確認できます</p>\"}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 4391, "column": 2947}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4395, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/StoryForm.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport applicationNotes from '../content/applicationNotes.json';\n\ninterface Props {\n  exampleStory: string;\n  story: string;\n  setStory: (s: string) => void;\n  storyTextareaRef: React.RefObject<HTMLTextAreaElement>;\n  insertExampleToForm: () => void;\n  handleStoryChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\n  handleSubmit: (e: React.FormEvent) => void;\n  isSubmitting: boolean;\n  showError: boolean;\n  hasAgreed: boolean;\n  setHasAgreed: (agreed: boolean) => void;\n}\n\nconst StoryForm: React.FC<Props> = ({\n  exampleStory,\n  story,\n  storyTextareaRef,\n  insertExampleToForm,\n  handleStoryChange,\n  handleSubmit,\n  isSubmitting,\n  showError,\n  hasAgreed,\n  setHasAgreed,\n}) => {\n  const [canAgree, setCanAgree] = useState(false);\n  const noticeRef = useRef<HTMLDivElement | null>(null);\n  const touchStartY = useRef<number | null>(null);\n\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    const el = e.currentTarget;\n    // スクロール位置が一番下に近いかどうかを判定 (少し余裕を持たせる)\n    if (!canAgree && el.scrollTop + el.clientHeight >= el.scrollHeight - 8) {\n      setCanAgree(true);\n    }\n  };\n\n  // ネイティブリスナーを passive: false で登録して preventDefault を許可する\n  useEffect(() => {\n    const el = noticeRef.current;\n    if (!el) return;\n\n    const wheelHandler = (e: WheelEvent) => {\n      const delta = (e as WheelEvent).deltaY;\n      if ((delta > 0 && el.scrollTop + el.clientHeight >= el.scrollHeight) ||\n          (delta < 0 && el.scrollTop <= 0)) {\n        e.preventDefault();\n      }\n    };\n\n    const touchStartHandler = (e: TouchEvent) => {\n      touchStartY.current = e.touches[0]?.clientY ?? null;\n    };\n\n    const touchMoveHandler = (e: TouchEvent) => {\n      const startY = touchStartY.current;\n      if (startY === null) return;\n      const currentY = e.touches[0]?.clientY ?? 0;\n      const diff = startY - currentY; // 正：上スクロール、負：下スクロール\n      if ((diff > 0 && el.scrollTop + el.clientHeight >= el.scrollHeight) ||\n          (diff < 0 && el.scrollTop <= 0)) {\n        e.preventDefault();\n      }\n    };\n\n    el.addEventListener('wheel', wheelHandler, { passive: false });\n    el.addEventListener('touchstart', touchStartHandler, { passive: true });\n    el.addEventListener('touchmove', touchMoveHandler, { passive: false });\n\n    return () => {\n      el.removeEventListener('wheel', wheelHandler);\n      el.removeEventListener('touchstart', touchStartHandler);\n      el.removeEventListener('touchmove', touchMoveHandler);\n    };\n  }, [noticeRef]);\n\n  useEffect(() => {\n    const agreed = localStorage.getItem('storyFormAgreed');\n    if (agreed === 'true') {\n      setHasAgreed(true);\n      setCanAgree(true);\n      localStorage.removeItem('storyFormAgreed'); // 一度読み込んだら削除\n    }\n  }, [setHasAgreed]);\n\n  return (\n    <>\n      <div className=\"mb-8 max-w-7xl mx-auto\">\n        <div\n          ref={noticeRef}\n          onScroll={handleScroll}\n          className=\"h-64 overflow-y-auto bg-[#40848E] border border-gray-300 text-white text-sm\"\n        >\n          <div className=\"px-4 py-3 border-b border-gray-300 sticky top-0 bg-white\">\n            <h4 className=\"text-left text-lg text-gray-900 font-bold\">応募に関する注意事項</h4>\n          </div>\n          <div className=\"p-4 space-y-4\">\n            <p className=\"font-bold text-white\">{applicationNotes.title}</p>\n            {applicationNotes.sections.map((sec, idx) => (\n              <div key={idx}>\n                <h5\n                  className=\"font-bold text-white\"\n                  id={sec.title.includes(\"個人情報の取り扱い\") ? \"privacy-policy\" : undefined}\n                >\n                  {sec.title}\n                </h5>\n                <div className=\"text-white\" dangerouslySetInnerHTML={{ __html: sec.html }} />\n              </div>\n            ))}\n          </div>\n        </div>\n        <div className=\"mt-4 flex items-center justify-center\">\n          <input\n            type=\"checkbox\"\n            id=\"agreement\"\n            checked={hasAgreed}\n            onChange={(e) => setHasAgreed(e.target.checked)}\n            disabled={!canAgree}\n            className=\"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          />\n          <label htmlFor=\"agreement\" className={`ml-2 block text-sm ${canAgree ? 'text-neutral-300' : 'text-neutral-500'}`}>\n            応募に関する注意事項に同意します\n          </label>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-8 max-w-screen-2xl mx-auto\">\n        <div className=\"mb-8 md:mb-0 flex flex-col\">\n          <h4 className=\"text-left text-xl text-white mb-3 font-bold\">例文</h4>\n          <div className=\"relative flex flex-col h-full\">\n            <div\n              className={`w-full p-4 bg-neutral-900/50 border border-dashed border-neutral-600 rounded-lg text-neutral-300 text-sm max-h-[60vh] overflow-y-auto whitespace-pre-wrap`}\n            >\n              {exampleStory}\n            </div>\n            <div className=\"text-right text-neutral-400 text-sm mt-2 pr-1\">\n              {exampleStory.length}文字\n            </div>\n            <div className=\"text-center mt-2 h-12 flex items-center justify-center\">\n              <span\n                onClick={hasAgreed ? insertExampleToForm : undefined}\n                role=\"button\"\n                aria-disabled={!hasAgreed}\n                tabIndex={hasAgreed ? 0 : -1}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    if (hasAgreed) {\n                      insertExampleToForm();\n                    }\n                  }\n                }}\n                className={`text-emerald-400 ${hasAgreed ? 'hover:underline cursor-pointer' : 'opacity-50 cursor-not-allowed'} text-sm font-semibold transition-opacity duration-200`}\n              >\n                この例文を元に書く\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <form id=\"truestoryform\" onSubmit={handleSubmit} className=\"flex flex-col h-full\">\n          <h4 className=\"text-left text-xl text-white mb-3 font-bold\">応募フォーム</h4>\n          <p className=\"text-xs mb-2\">入力内容はブラウザに自動保存されます。ページを閉じたり更新しても、後で編集を再開できます。</p>\n          <div className=\"relative flex-grow\">\n            <textarea\n              ref={storyTextareaRef}\n              value={story}\n              onChange={handleStoryChange}\n              placeholder=\"ここにあなたの物語を記入してください...\"\n              className={`w-full p-4 bg-neutral-900/50 border ${showError ? 'border-red-500' : 'border-emerald-500'} rounded-lg text-neutral-300 text-lg min-h-[600px] resize-none`}\n              disabled={!hasAgreed}\n            />\n            {!hasAgreed && (\n              <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center bg-neutral-900/80 rounded-lg\">\n                <span className=\"text-red-400 text-sm font-semibold text-center px-4\">\n                  注意事項を確認し、同意すると入力できます\n                </span>\n              </div>\n            )}\n          </div>\n          <div className=\"text-right text-neutral-400 text-sm mt-2 pr-1\">\n            {story.length}文字\n          </div>\n          <div className=\"text-center mt-6 h-20 flex items-center justify-center\">\n            <button\n              type=\"submit\"\n              disabled={isSubmitting || !hasAgreed}\n              className=\"bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition-opacity duration-300 text-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              この物語を送信する\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\n\nexport default StoryForm;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4776, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/SubmissionSuccess.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\ninterface Props {\n  tweetTemplate: string;\n  onRetry: () => void;\n}\n\nconst SubmissionSuccess: React.FC<Props> = ({ tweetTemplate, onRetry }) => {\n  useEffect(() => {\n    // このコンポーネントが表示された際にXのイベントピクセルを発火させます。\n    // これにより、物語の投稿が成功した（コンバージョン）ことをトラッキングします。\n    if ((window as any).twq) {\n      (window as any).twq('event', 'tw-qaf9m-qaf9m', {});\n    }\n  }, []);\n\n  const postToX = () => {\n    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(tweetTemplate)}`;\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  // A simple X logo SVG component\n  const XLogo = () => (\n    <svg viewBox=\"0 0 1200 1227\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" role=\"img\" className=\"w-6 h-6\" fill=\"currentColor\">\n      <path d=\"M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.163 519.284ZM569.165 687.828L521.697 619.934L144.011 79.6902H306.615L611.412 515.685L658.88 583.579L1055.08 1150.31H892.476L569.165 687.828Z\" />\n    </svg>\n  );\n\n  return (\n    <div className=\"bg-black text-white font-sans max-w-md mx-auto rounded-2xl border border-neutral-800 shadow-2xl shadow-blue-500/10 overflow-hidden my-8\">\n      <div className=\"p-4\">\n        <div className=\"flex items-start\">\n          {/* Profile Picture */}\n          <img src=\"/img/logo.png\" alt=\"True Story Logo\" className=\"w-12 h-12 rounded-full mr-4\" />\n\n          <div className=\"flex-1\">\n            {/* Header */}\n            <div className=\"flex justify-between items-center\">\n              <div className=\"font-bold\">True Story</div>\n              <XLogo />\n            </div>\n            <div className=\"text-neutral-500 text-sm\">@TrueStoryApp</div>\n\n            {/* Message */}\n            <p className=\"mt-3 mb-4\">\n              投稿ありがとうございます！<br />\n              物語を投稿したことを共有しよう。\n            </p>\n\n            {/* \"Quoted Tweet\" */}\n            <div className=\"border border-neutral-700 rounded-xl p-3 mt-2\">\n              <p className=\"text-neutral-400 text-sm\">↓ Xでシェアする内容</p>\n              <p className=\"mt-2 whitespace-pre-wrap text-sm\">\n                {tweetTemplate}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex border-t border-neutral-800\">\n        <button\n          onClick={onRetry}\n          className=\"flex-1 text-center py-3 text-neutral-400 hover:bg-neutral-900 transition-colors duration-200\"\n        >\n          もう一度書く\n        </button>\n        <div className=\"w-px bg-neutral-800\"></div>\n        <button\n          onClick={postToX}\n          className=\"flex-1 flex items-center justify-center gap-2 text-center py-3 font-bold text-blue-500 hover:bg-blue-500/10 transition-colors duration-200\"\n        >\n          <XLogo />\n          <span>Xでシェアする</span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SubmissionSuccess;"],"names":[],"mappings":";;;;;AAAA;;;;AAOA,MAAM,oBAAqC,CAAC,EAAE,aAAa,EAAE,OAAO,EAAE;;IACpE,IAAA,0KAAS;uCAAC;YACR,sCAAsC;YACtC,yCAAyC;YACzC,IAAI,AAAC,OAAe,GAAG,EAAE;gBACtB,OAAe,GAAG,CAAC,SAAS,kBAAkB,CAAC;YAClD;QACF;sCAAG,EAAE;IAEL,MAAM,UAAU;QACd,MAAM,MAAM,CAAC,sCAAsC,EAAE,mBAAmB,gBAAgB;QACxF,OAAO,IAAI,CAAC,KAAK,UAAU;IAC7B;IAEA,gCAAgC;IAChC,MAAM,QAAQ,kBACZ,6LAAC;YAAI,SAAQ;YAAgB,OAAM;YAA6B,eAAY;YAAO,MAAK;YAAM,WAAU;YAAU,MAAK;sBACrH,cAAA,6LAAC;gBAAK,GAAE;;;;;;;;;;;IAIZ,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,KAAI;4BAAgB,KAAI;4BAAkB,WAAU;;;;;;sCAEzD,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;sDAAY;;;;;;sDAC3B,6LAAC;;;;;;;;;;;8CAEH,6LAAC;oCAAI,WAAU;8CAA2B;;;;;;8CAG1C,6LAAC;oCAAE,WAAU;;wCAAY;sDACV,6LAAC;;;;;wCAAK;;;;;;;8CAKrB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAE,WAAU;sDAA2B;;;;;;sDACxC,6LAAC;4CAAE,WAAU;sDACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQX,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAGD,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,6LAAC;;;;;0CACD,6LAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKhB;GAxEM;KAAA;uCA0ES","debugId":null}},
    {"offset": {"line": 4994, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/ConfirmationModal.tsx"],"sourcesContent":["import React from 'react';\nimport { X } from 'lucide-react';\n\ninterface ConfirmationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  story: string;\n}\n\nconst ConfirmationModal: React.FC<ConfirmationModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  story,\n}) => {\n  React.useEffect(() => {\n    if (!isOpen) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\n      <div className=\"bg-neutral-900 rounded-lg shadow-lg p-8 w-full max-w-lg relative mx-4 border border-neutral-700\">\n        <button\n          className=\"absolute top-3 right-3 text-neutral-400 hover:text-white\"\n          onClick={onClose}\n          type=\"button\"\n        >\n          <X size={24} />\n        </button>\n        <h3 className=\"text-2xl font-bold text-white mb-4 text-center\">{title}</h3>\n        <div className=\"my-6\">\n            <p className=\"text-neutral-300 mb-4\">以下の内容で物語を送信します。よろしいですか？</p>\n            <div className=\"bg-neutral-800/50 border border-neutral-700 rounded-lg p-4 max-h-60 overflow-y-auto\">\n                <p className=\"text-neutral-200 whitespace-pre-wrap\">{story}</p>\n            </div>\n        </div>\n        <div className=\"flex justify-end gap-4\">\n          <button\n            onClick={onClose}\n            type=\"button\"\n            className=\"py-2 px-6 bg-neutral-700 text-white rounded-md hover:bg-neutral-600 transition-colors\"\n          >\n            キャンセル\n          </button>\n          <button\n            onClick={onConfirm}\n            type=\"button\"\n            className=\"py-2 px-6 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold rounded-md hover:opacity-90 transition-opacity\"\n          >\n            送信する\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfirmationModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAUA,MAAM,oBAAsD,CAAC,EAC3D,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,KAAK,EACN;;IACC,wKAAK,CAAC,SAAS;uCAAC;YACd,IAAI,CAAC,QAAQ;YAEb,MAAM;6DAAgB,CAAC;oBACrB,IAAI,MAAM,GAAG,KAAK,UAAU;wBAC1B;oBACF;gBACF;;YAEA,OAAO,gBAAgB,CAAC,WAAW;YAEnC;+CAAO;oBACL,OAAO,mBAAmB,CAAC,WAAW;gBACxC;;QACF;sCAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,WAAU;oBACV,SAAS;oBACT,MAAK;8BAEL,cAAA,6LAAC,oMAAC;wBAAC,MAAM;;;;;;;;;;;8BAEX,6LAAC;oBAAG,WAAU;8BAAkD;;;;;;8BAChE,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAE,WAAU;sCAAwB;;;;;;sCACrC,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAE,WAAU;0CAAwC;;;;;;;;;;;;;;;;;8BAG7D,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,MAAK;4BACL,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,SAAS;4BACT,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GA7DM;KAAA;uCA+DS","debugId":null}},
    {"offset": {"line": 5143, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/LoginRedirectModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface LoginRedirectModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  countdownDuration?: number;\n}\n\nconst LoginRedirectModal: React.FC<LoginRedirectModalProps> = ({\n  isOpen,\n  onClose,\n  countdownDuration = 5,\n}) => {\n  const [countdown, setCountdown] = useState(countdownDuration);\n  const router = useRouter();\n  const [isVisible, setIsVisible] = useState(false);\n  const [isRendering, setIsRendering] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsRendering(true);\n      setIsVisible(true);\n      setCountdown(countdownDuration);\n    } else {\n      setIsVisible(false); // Start fade-out\n      const timer = setTimeout(() => {\n        setIsRendering(false); // Unmount after animation\n        onClose(); // Call onClose after animation\n      }, 300); // Match transition duration\n      return () => clearTimeout(timer);\n    }\n  }, [isOpen, countdownDuration, onClose]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countdown <= 0) {\n      router.push('/users/member');\n      onClose();\n      return;\n    }\n\n    const timerId = setTimeout(() => {\n      setCountdown(countdown - 1);\n    }, 1000);\n\n    return () => clearTimeout(timerId);\n  }, [isOpen, countdown, router, onClose]);\n\n  if (!isRendering) return null;\n\n  return (\n    <div\n      className={`fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 transition-opacity duration-300 ease-in-out ${\n        isVisible ? 'opacity-100' : 'opacity-0'\n      }`}\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-gradient-to-br from-neutral-800 to-neutral-900 p-8 rounded-xl shadow-2xl max-w-md w-full text-center border border-neutral-700 transform transition-all duration-300 ease-in-out scale-95\"\n        style={{ transform: isVisible ? 'scale(1)' : 'scale(0.95)' }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex justify-center items-center mb-6\">\n          <svg className=\"animate-spin h-8 w-8 text-emerald-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n        </div>\n        <h3 className=\"text-xl font-bold mb-2 text-white\">ログインページへ移動します</h3>\n        <div className=\"mb-6 text-neutral-300\">\n          <p>物語の送信まであと少しです。</p>\n          <p>入力内容は保持されます。</p>\n        </div>\n        <div className=\"flex justify-center items-center text-neutral-400\">\n          <p>\n            <span className=\"text-2xl font-bold text-emerald-500\">{countdown}</span>\n            秒後に自動で移動します...\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoginRedirectModal;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAQA,MAAM,qBAAwD,CAAC,EAC7D,MAAM,EACN,OAAO,EACP,oBAAoB,CAAC,EACtB;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,IAAA,0KAAS;wCAAC;YACR,IAAI,QAAQ;gBACV,eAAe;gBACf,aAAa;gBACb,aAAa;YACf,OAAO;gBACL,aAAa,QAAQ,iBAAiB;gBACtC,MAAM,QAAQ;0DAAW;wBACvB,eAAe,QAAQ,0BAA0B;wBACjD,WAAW,+BAA+B;oBAC5C;yDAAG,MAAM,4BAA4B;gBACrC;oDAAO,IAAM,aAAa;;YAC5B;QACF;uCAAG;QAAC;QAAQ;QAAmB;KAAQ;IAEvC,IAAA,0KAAS;wCAAC;YACR,IAAI,CAAC,QAAQ;YAEb,IAAI,aAAa,GAAG;gBAClB,OAAO,IAAI,CAAC;gBACZ;gBACA;YACF;YAEA,MAAM,UAAU;wDAAW;oBACzB,aAAa,YAAY;gBAC3B;uDAAG;YAEH;gDAAO,IAAM,aAAa;;QAC5B;uCAAG;QAAC;QAAQ;QAAW;QAAQ;KAAQ;IAEvC,IAAI,CAAC,aAAa,OAAO;IAEzB,qBACE,6LAAC;QACC,WAAW,CAAC,uHAAuH,EACjI,YAAY,gBAAgB,aAC5B;QACF,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE,WAAW,YAAY,aAAa;YAAc;YAC3D,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;wBAAwC,OAAM;wBAA6B,MAAK;wBAAO,SAAQ;;0CAC5G,6LAAC;gCAAO,WAAU;gCAAa,IAAG;gCAAK,IAAG;gCAAK,GAAE;gCAAK,QAAO;gCAAe,aAAY;;;;;;0CACxF,6LAAC;gCAAK,WAAU;gCAAa,MAAK;gCAAe,GAAE;;;;;;;;;;;;;;;;;8BAGvD,6LAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;sCAAE;;;;;;sCACH,6LAAC;sCAAE;;;;;;;;;;;;8BAEL,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;;0CACC,6LAAC;gCAAK,WAAU;0CAAuC;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;;;;;AAOpF;GA3EM;;QAMW,kJAAS;;;KANpB;uCA6ES","debugId":null}},
    {"offset": {"line": 5341, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/WelcomeBackModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\ninterface WelcomeBackModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  countdownDuration?: number;\n}\n\nconst WelcomeBackModal: React.FC<WelcomeBackModalProps> = ({\n  isOpen,\n  onClose,\n  countdownDuration = 3, // Shorter duration\n}) => {\n  const [countdown, setCountdown] = useState(countdownDuration);\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsVisible(true);\n      setCountdown(countdownDuration);\n    } else {\n      setIsVisible(false);\n    }\n  }, [isOpen, countdownDuration]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countdown <= 0) {\n      onClose();\n      return;\n    }\n\n    const timerId = setTimeout(() => {\n      setCountdown(countdown - 1);\n    }, 1000);\n\n    return () => clearTimeout(timerId);\n  }, [isOpen, countdown, onClose]);\n\n  if (!isOpen && !isVisible) return null;\n\n  return (\n    <div\n      className={`fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50 transition-opacity duration-300 ease-in-out ${\n        isVisible ? 'opacity-100' : 'opacity-0'\n      }`}\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-gradient-to-br from-neutral-800 to-neutral-900 p-8 rounded-xl shadow-2xl max-w-md w-full text-center border border-neutral-700 transform transition-all duration-300 ease-in-out scale-95\"\n        style={{ transform: isVisible ? 'scale(1)' : 'scale(0.95)' }}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex justify-center items-center mb-6\">\n          <svg className=\"animate-spin h-8 w-8 text-emerald-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n        </div>\n        <h3 className=\"text-xl font-bold mb-2 text-white\">ログインありがとうございます</h3>\n        <div className=\"mb-6 text-neutral-300\">\n          <p>送信確認画面に戻ります。</p>\n        </div>\n        <div className=\"flex justify-center items-center text-neutral-400\">\n          <p>\n            <span className=\"text-2xl font-bold text-emerald-500\">{countdown}</span>\n            秒後に自動で閉じます...\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomeBackModal;\n"],"names":[],"mappings":";;;;;AAAA;;;;AAQA,MAAM,mBAAoD,CAAC,EACzD,MAAM,EACN,OAAO,EACP,oBAAoB,CAAC,EACtB;;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,IAAA,0KAAS;sCAAC;YACR,IAAI,QAAQ;gBACV,aAAa;gBACb,aAAa;YACf,OAAO;gBACL,aAAa;YACf;QACF;qCAAG;QAAC;QAAQ;KAAkB;IAE9B,IAAA,0KAAS;sCAAC;YACR,IAAI,CAAC,QAAQ;YAEb,IAAI,aAAa,GAAG;gBAClB;gBACA;YACF;YAEA,MAAM,UAAU;sDAAW;oBACzB,aAAa,YAAY;gBAC3B;qDAAG;YAEH;8CAAO,IAAM,aAAa;;QAC5B;qCAAG;QAAC;QAAQ;QAAW;KAAQ;IAE/B,IAAI,CAAC,UAAU,CAAC,WAAW,OAAO;IAElC,qBACE,6LAAC;QACC,WAAW,CAAC,uHAAuH,EACjI,YAAY,gBAAgB,aAC5B;QACF,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,OAAO;gBAAE,WAAW,YAAY,aAAa;YAAc;YAC3D,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAEjC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;wBAAwC,OAAM;wBAA6B,MAAK;wBAAO,SAAQ;;0CAC5G,6LAAC;gCAAO,WAAU;gCAAa,IAAG;gCAAK,IAAG;gCAAK,GAAE;gCAAK,QAAO;gCAAe,aAAY;;;;;;0CACxF,6LAAC;gCAAK,WAAU;gCAAa,MAAK;gCAAe,GAAE;;;;;;;;;;;;;;;;;8BAGvD,6LAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;kCAAE;;;;;;;;;;;8BAEL,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;;0CACC,6LAAC;gCAAK,WAAU;0CAAuC;;;;;;4BAAiB;;;;;;;;;;;;;;;;;;;;;;;AAOpF;GAjEM;KAAA;uCAmES","debugId":null}},
    {"offset": {"line": 5509, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/TrueStory.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport type { User } from '@supabase/supabase-js';\nimport IndividualAuthForm from './IndividualAuthForm';\nimport GoogleAuthForm from './GoogleAuthForm';\nimport { X } from 'lucide-react';\nimport { useAuth } from '../contexts/AuthContext';\nimport StoryForm from './StoryForm';\nimport SubmissionSuccess from './SubmissionSuccess';\nimport ConfirmationModal from './ConfirmationModal';\nimport LoginRedirectModal from './LoginRedirectModal';\nimport WelcomeBackModal from './WelcomeBackModal';\n\ninterface TrueStoryProps {}\n\nconst TrueStory: React.FC<TrueStoryProps> = () => {\n  const { session } = useAuth();\n  const [story, setStory] = useState('');\n  const [isSubmitted, setIsSubmitted] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showError, setShowError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [hasAgreed, setHasAgreed] = useState(false);\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\n  const [storyForModal, setStoryForModal] = useState('');\n  const [showLoginRedirectModal, setShowLoginRedirectModal] = useState(false);\n  const [showWelcomeBackModal, setShowWelcomeBackModal] = useState(false);\n\n  const localStorageKey = 'trueStoryDraft';\n\n  const exampleStory = `私は高知県の女子大に通う大学1年生です。\n私には大学の友達には誰にも言えない秘密があります。\n高校3年の時に体験したちょっと変わった恋愛体験です。\n私には当時気になっていた同級生がいました。\nでも、怖くて誰にも言えませんでした。\n恋愛対象が女性だったからです。\n友達は、サッカー部の○○君かっこいいとか、野球部の○○君かっこいいという話で盛り上がっていましたが、私は全くそんな感情がなく\nずっと目で追いかけていたのはクラスの女の子でした。\nその子は3年の4月に、東京から引っ越してきた転校生でした。\n「なんか、気になる。」\n本当にこれだけでした。\n元々、高校1年の時は他のクラスの同級生の男子とお付き合いしていたり、普通に青春を過ごしていました。\n高校2年の時には、バスケ部の男子からの猛アタックもあったり...。\nバスケ部の彼は学年でも優しくて評判の男子でした。\nでも高校3年の4月を境に急に自分の恋愛観が変わりました。\n正直あの時に体験は書ききれないし、うまく伝えきれません。\nでも、ビビッときました。\nそのまま特に何も変わらない日々が続き、\nバスケ部の彼から屋上で告白されました。\nすごく嬉しかったのですが、どうしても4月に感じたあの感覚が忘れられずに、気持ちには応えられないと断って、\n転校生の子のところへ向かいました・・・`;\n\n  const tweetTemplate = `True Story【実話の物語】の実話募集中！\n皆さんの実話が映像作品になるかも！？\n以下のURLから参加しよう！\nhttps://www.truestory.jp/\n#truestory #実話の物語 #実話募集`;\n\n  // This effect handles showing the welcome back modal\n  useEffect(() => {\n    const shouldShowWelcomeBack = localStorage.getItem('showWelcomeBackModalAfterLogin') === 'true';\n    if (shouldShowWelcomeBack && session) {\n      console.log(\"TrueStory.tsx: WelcomeBackModalを表示中。\");\n      setShowWelcomeBackModal(true);\n      localStorage.removeItem('showWelcomeBackModalAfterLogin');\n    }\n  }, [session]);\n\n  // This effect handles showing the confirmation modal\n  useEffect(() => {\n    const shouldShowModalAfterLogin = localStorage.getItem('showConfirmModalAfterLogin') === 'true';\n    if (shouldShowModalAfterLogin && session && story) {\n      // We don't show it immediately, we wait for the welcome modal to close\n      // This will be handled by the `handleWelcomeBackClose` function\n    }\n  }, [session, story]);\n\n  const showErrorWithTimeout = (message: string) => {\n    setErrorMessage(message);\n    setShowError(true);\n    setTimeout(() => setShowError(false), 3000);\n  };\n\n  useEffect(() => {\n    const savedDraft = localStorage.getItem(localStorageKey);\n    if (savedDraft) {\n      setStory(savedDraft);\n    }\n  }, []);\n\n  const handleStoryChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const newStory = e.target.value;\n    setStory(newStory);\n    localStorage.setItem(localStorageKey, newStory);\n  };\n\n  const storyTextareaRef = useRef<HTMLTextAreaElement | null>(null);\n\n  const insertExampleToForm = () => {\n    setStory(exampleStory);\n    localStorage.setItem(localStorageKey, exampleStory);\n    setIsSubmitted(false);\n    setTimeout(() => {\n      const el = storyTextareaRef.current;\n      if (el) {\n        el.focus();\n        el.selectionStart = el.selectionEnd = el.value.length;\n      }\n    }, 0);\n  };\n\n  const submitStory = async (storyText: string, user: User) => {\n    setIsSubmitting(true);\n    setErrorMessage('');\n    setShowError(false);\n\n    try {\n      const storyBlob = new Blob([storyText], { type: 'text/plain' });\n      const iso = new Date().toISOString();\n      const timestamp = iso.replace(/:/g, '-');\n      const fileName = `story-${timestamp}.txt`;\n      \n      const { error: uploadError } = await supabase.storage\n        .from('stories')\n        .upload(`public/${fileName}`, storyBlob);\n\n      if (uploadError) throw uploadError;\n\n      const { error: insertError } = await supabase.from('stories').insert([\n        { user_id: user.id, file_path: `public/${fileName}` },\n      ]);\n\n      if (insertError) throw insertError;\n\n      setIsSubmitting(false);\n      setIsSubmitted(true);\n      setStory('');\n      localStorage.removeItem(localStorageKey);\n    } catch (error) {\n      console.error('Error submitting form:', error);\n      if (error instanceof Error) {\n        setErrorMessage(`送信中にエラーが発生しました: ${error.message}`);\n      } else {\n        setErrorMessage('送信中に不明なエラーが発生しました。');\n      }\n      setShowError(true);\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleMainSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!story.trim()) {\n      showErrorWithTimeout('フォームを入力してください。');\n      return;\n    }\n\n    setStoryForModal(story);\n\n    if (!session) {\n      localStorage.setItem('pendingStorySubmission', 'true');\n      localStorage.setItem('showConfirmModalAfterLogin', 'true');\n      localStorage.setItem('showWelcomeBackModalAfterLogin', 'true');\n      if (hasAgreed) {\n        localStorage.setItem('storyFormAgreed', 'true');\n      }\n      setShowLoginRedirectModal(true);\n      return;\n    }\n    \n    setShowConfirmModal(true);\n  };\n\n  const handleConfirmSubmit = () => {\n    if (session) {\n      submitStory(storyForModal, session.user);\n    }\n    setShowConfirmModal(false);\n  };\n\n  const handleAuthSuccess = () => {\n    setShowAuthModal(false);\n  };\n\n  // 5. Handle closing of welcome modal\n  const handleWelcomeBackClose = () => {\n    setShowWelcomeBackModal(false);\n    const shouldShowConfirm = localStorage.getItem('showConfirmModalAfterLogin') === 'true';\n    if (shouldShowConfirm && story) {\n        setStoryForModal(story);\n        setShowConfirmModal(true);\n        localStorage.removeItem('showConfirmModalAfterLogin');\n    }\n  };\n\n  return (\n    <section className=\"py-20 md:py-32 bg-neutral-900\" >\n      <div className=\"container mx-auto px-6 md:px-12 max-w-4xl\">\n        <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">\n          TRUE STORY\n        </h2>\n        <p className=\"font-noto text-lg text-center text-white mb-12\">\n          あなたの「実話の物語」を教えてください。\n        </p>\n\n        <div className=\"max-w-3xl mx-auto mb-8\">\n          <div\n            className=\"border rounded-lg p-4 md:p-6\"\n            style={{ backgroundColor: '#315477',  }}\n          >\n            <div className=\"flex flex-col mb-4 relative\">\n              <h4 className=\"text-lg md:text-xl font-semibold text-white text-center py-4\">\n                今回募集するテーマは5つ！\n              </h4>\n              <div className=\"mt-2 flex justify-center md:absolute md:right-0 md:top-1/2 md:-translate-y-1/2 md:mt-0\">\n                {/* 環境変数から読み込み。無ければ public 配下のフォールバック画像を使用し、警告を出す */}\n                {(() => {\n                  const QUO_CARD_IMAGE_URL = process.env.NEXT_PUBLIC_QUO_CARD_IMAGE_URL ?? '/img/st050011_quosmile_silver.jpg';\n                  if (!process.env.NEXT_PUBLIC_QUO_CARD_IMAGE_URL) {\n                    console.warn('NEXT_PUBLIC_QUO_CARD_IMAGE_URL is not set. Using fallback image.');\n                  }\n                  return (\n                    <img\n                      src={QUO_CARD_IMAGE_URL}\n                      alt=\"QUOカード\"\n                      className=\"h-auto rounded-lg shadow-lg max-w-[80px] md:max-w-[100px]\"\n                    />\n                  );\n                })()}\n              </div>\n            </div>\n            <p className=\"text-center text-white text-base mb-4\">\n              ご提供いただきました実話が採用された場合、謝礼として5,000円分のQUOカードを贈呈！\n            </p>\n\n            <div className=\"divide-y divide-neutral-700\">\n              <div className=\"py-3 flex items-center gap-4\">\n                <div className=\"w-6 text-center text-white font-bold\">1</div>\n                <div className=\"text-white\">学生時代の葛藤と成長</div>\n              </div>\n\n              <div className=\"py-3 flex items-center gap-4\">\n                <div className=\"w-6 text-center text-white font-bold\">2</div>\n                <div className=\"text-white\">恋愛や友情の転機</div>\n              </div>\n\n              <div className=\"py-3 flex items-center gap-4\">\n                <div className=\"w-6 text-center text-white font-bold\">3</div>\n                <div className=\"text-white\">家族との絆のすれ違い</div>\n              </div>\n\n              <div className=\"py-3 flex items-center gap-4\">\n                <div className=\"w-6 text-center text-white font-bold\">4</div>\n                <div className=\"text-white\">デジタル社会での葛藤</div>\n              </div>\n\n              <div className=\"py-3 flex items-center gap-4\">\n                <div className=\"w-6 text-center text-white font-bold\">5</div>\n                <div className=\"text-white\">夢と挫折、挑戦と成長</div>\n              </div>\n            </div>\n\n            <p className=\"text-white text-sm text-center mt-4\">\n              この5つのテーマから募集を行い、最終的に1つの物語を映像作品にします！\n            </p>\n            <p className=\"text-white text-xs text-center mt-2\">\n              ※ご応募いただく実話は、上記5つのテーマのうちいずれか1つに沿った内容でお願いいたします。\n            </p>\n          </div>\n        </div>\n\n        {showError && (\n          <div className=\"mb-6 p-4 bg-red-900/50 border-l-4 border-red-500 text-red-200 rounded-md\">\n            <div className=\"flex items-center\">\n              <svg className=\"w-5 h-5 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n              </svg>\n              <span className=\"font-medium\">{errorMessage}</span>\n            </div>\n          </div>\n        )}\n\n        {isSubmitted ? (\n          <SubmissionSuccess tweetTemplate={tweetTemplate} onRetry={() => setIsSubmitted(false)} />\n        ) : (\n          <StoryForm\n            exampleStory={exampleStory}\n            story={story}\n            setStory={setStory}\n            storyTextareaRef={storyTextareaRef}\n            insertExampleToForm={insertExampleToForm}\n            handleStoryChange={handleStoryChange}\n            handleSubmit={handleMainSubmit}\n            isSubmitting={isSubmitting}\n            showError={showError}\n            hasAgreed={hasAgreed}\n            setHasAgreed={setHasAgreed}\n          />\n        )}\n\n        {showAuthModal && (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60\">\n            <div className=\"bg-neutral-900 rounded-lg shadow-lg p-8 w-full max-w-md relative mx-4\">\n              <button\n                className=\"absolute top-2 right-2 text-white hover:text-white text-xl\"\n                onClick={() => setShowAuthModal(false)}\n                type=\"button\"\n              >\n                <X size={24} />\n              </button>\n              <h3 className=\"text-xl font-bold text-white mb-6 text-center\">ログインまたは新規登録</h3>\n              <GoogleAuthForm onAuthSuccess={handleAuthSuccess} />\n              <div className=\"my-4 flex items-center\">\n                <div className=\"flex-grow border-t border-neutral-600\"></div>\n                <span className=\"flex-shrink mx-4 text-white text-sm\">または</span>\n                <div className=\"flex-grow border-t border-neutral-600\"></div>\n              </div>\n              <IndividualAuthForm onAuthSuccess={handleAuthSuccess} />\n            </div>\n          </div>\n        )}\n\n        <div className=\"text-center text-xs text-white mt-4\">\n          <p>個人を特定できる情報は含めないようご注意ください。</p>\n          <p>「この物語を送信する」ボタンを押すことにより、<a href=\"#privacy-policy\" className=\"text-cyan-400 hover:underline\">個人情報の取り扱い</a>について同意したものとみなします。</p>\n        </div>\n      </div>\n      <ConfirmationModal\n        isOpen={showConfirmModal}\n        onClose={() => setShowConfirmModal(false)}\n        onConfirm={handleConfirmSubmit}\n        title=\"物語の送信確認\"\n        story={storyForModal}\n      />\n      <LoginRedirectModal\n        isOpen={showLoginRedirectModal}\n        onClose={() => setShowLoginRedirectModal(false)}\n      />\n      {/* 6. Add WelcomeBackModal to JSX */}\n      <WelcomeBackModal\n        isOpen={showWelcomeBackModal}\n        onClose={handleWelcomeBackClose}\n      />\n    </section>\n  );\n};\n\nexport default TrueStory;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6192, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/VoteModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { X } from 'lucide-react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface Artist {\n  id: string;\n  name: string;\n  points?: number;\n  image_url?: string;\n  role?: string;\n}\n\ninterface VoteModalProps {\n  isOpen: boolean;\n  onClose: (voteSubmitted: boolean) => void;\n  artists: Artist[];\n  onShowPrivacyPolicy: () => void;\n}\n\nconst VoteModal: React.FC<VoteModalProps> = ({ isOpen, onClose, artists, onShowPrivacyPolicy }) => {\n  // すべてのHooksをearly returnより前に配置\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [userPhoneNumber, setUserPhoneNumber] = useState<string>('');\n  const [hasAlreadyVotedToday, setHasAlreadyVotedToday] = useState<boolean>(false);\n  const [step, setStep] = useState<'artist-selection' | 'phone-input' | 'otp'>('artist-selection');\n  const [selectedArtistId, setSelectedArtistId] = useState<string>('');\n  const [phoneNumber, setPhoneNumber] = useState<string>('');\n  const [otp, setOtp] = useState('');\n  const [voterName, setVoterName] = useState('');\n  const [message, setMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [showSuccessModal, setShowSuccessModal] = useState(false);\n\n  useEffect(() => {\n    const checkUserStatus = async () => {\n      if (!isOpen) return;\n      \n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        setCurrentUser(session.user);\n        \n        // 登録済みユーザーの電話番号を取得\n        const { data: member } = await supabase\n          .from('individual_members')\n          .select('phone_number')\n          .eq('auth_user_id', session.user.id)\n          .single();\n          \n        if (member?.phone_number) {\n          setUserPhoneNumber(member.phone_number);\n          setPhoneNumber(member.phone_number);\n        }\n      }\n    };\n\n    checkUserStatus();\n  }, [isOpen]);\n\n  // 今日の投票状況をチェック\n  useEffect(() => {\n    const checkTodaysVote = async () => {\n      if (!isOpen) return;\n      \n      if (currentUser) {\n        // ログインユーザーの場合（任意のアーティストへの投票をチェック）\n        const { data, error } = await supabase\n          .rpc('check_user_todays_vote', {\n            p_user_id: currentUser.id,\n            p_artist_id: selectedArtistId || '00000000-0000-0000-0000-000000000000' // ダミーID\n          });\n          \n        if (!error) {\n          setHasAlreadyVotedToday(data);\n        }\n      } else if (phoneNumber) {\n        // 未ログインユーザーの場合（任意のアーティストへの投票をチェック）\n        const { data, error } = await supabase\n          .rpc('check_todays_vote', {\n            p_phone_number: phoneNumber,\n            p_artist_id: selectedArtistId || '00000000-0000-0000-0000-000000000000' // ダミーID\n          });\n          \n        if (!error) {\n          setHasAlreadyVotedToday(data);\n        }\n      }\n    };\n\n    checkTodaysVote();\n  }, [isOpen, phoneNumber, currentUser]); // selectedArtistIdを依存配列から除去\n\n  // isOpenがfalseの場合はearly returnをHooksの後に配置\n  if (!isOpen) {\n    return null;\n  }\n\n  const resetForm = () => {\n    setStep('artist-selection');\n    setSelectedArtistId('');\n    setPhoneNumber('');\n    setOtp('');\n    setVoterName('');\n    setMessage('');\n    setIsSubmitting(false);\n    setShowSuccessMessage(false);\n    setErrorMessage('');\n  };\n\n  const handleClose = () => {\n    onClose(showSuccessMessage);\n    resetForm();\n  };\n\n  const handlePhoneNumberChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = e.target;\n    if (/^\\+?[0-9]*$/.test(value)) {\n      setPhoneNumber(value);\n    }\n  };\n\n  const formatPhoneNumber = (number: string): string => {\n    if (number.startsWith('0')) {\n      // '0'で始まる場合、日本の国コード'+81'を付けて先頭の'0'を削除\n      return `+81${number.substring(1)}`;\n    }\n    return number;\n  };\n\n  const handleVote = async () => {\n    if (!selectedArtistId || (!phoneNumber && !currentUser)) return;\n\n    // 今日既に投票済みかチェック\n    if (hasAlreadyVotedToday) {\n      setErrorMessage('本日はすでに投票済みです。1日1回のみ投票可能です。');\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setErrorMessage('');\n\n      const votePhoneNumber = phoneNumber || userPhoneNumber;\n      \n      // 登録済みユーザーで電話番号認証をスキップする場合\n      const shouldSkipVerification = currentUser && userPhoneNumber;\n\n      if (shouldSkipVerification) {\n        // 直接投票を記録\n        await recordVote(votePhoneNumber);\n      } else {\n        // 電話番号認証を開始\n        await sendVerificationCode();\n      }\n    } catch (error) {\n      console.error('Vote error:', error);\n      setErrorMessage('投票中にエラーが発生しました');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const sendVerificationCode = async () => {\n    if (!phoneNumber || !voterName) {\n      setErrorMessage('電話番号とニックネームを入力してください');\n      return;\n    }\n\n    try {\n      const formattedPhone = formatPhoneNumber(phoneNumber);\n      \n      // Supabase Auth でSMS認証を開始\n      const { error } = await supabase.auth.signInWithOtp({\n        phone: formattedPhone,\n      });\n\n      if (error) {\n        throw error;\n      }\n\n      setStep('otp');\n    } catch (error) {\n      console.error('SMS send error:', error);\n      setErrorMessage('認証コードの送信に失敗しました');\n    }\n  };\n\n  const handleSubmitVote = async () => {\n    if (!otp) {\n      setErrorMessage('認証コードを入力してください');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      setErrorMessage('');\n\n      const formattedPhone = formatPhoneNumber(phoneNumber);\n\n      // OTPを検証\n      const { error } = await supabase.auth.verifyOtp({\n        phone: formattedPhone,\n        token: otp,\n        type: 'sms'\n      });\n\n      if (error) {\n        throw error;\n      }\n\n      // 認証成功後に投票記録\n      await recordVote(phoneNumber);\n    } catch (error) {\n      console.error('OTP verification error:', error);\n      setErrorMessage('認証コードが正しくありません');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const recordVote = async (votePhoneNumber: string) => {\n    try {\n      // 登録済みユーザーの場合、ニックネームとメッセージを取得\n      let finalVoterName = voterName;\n      let finalMessage = message;\n      \n      if (currentUser && userPhoneNumber) {\n        // 登録済みユーザーの場合、individual_membersテーブルからニックネームを取得\n        const { data: member } = await supabase\n          .from('individual_members')\n          .select('nickname')\n          .eq('auth_user_id', currentUser.id)\n          .single();\n          \n        finalVoterName = member?.nickname || 'ゲスト';\n        finalMessage = message || ''; // メッセージは空でもOK\n      }\n\n      console.log('Recording vote with data:', {\n        phone_number: votePhoneNumber,\n        artist_id: selectedArtistId,\n        voter_name: finalVoterName,\n        message: finalMessage,\n        user_id: currentUser?.id || null,\n        voted_date: new Date().toISOString().split('T')[0]\n      });\n\n      // Step 1: 投票を記録\n      const { data: voteData, error: voteError } = await supabase\n        .from('votes')\n        .insert({\n          phone_number: votePhoneNumber,\n          artist_id: selectedArtistId,\n          voter_name: finalVoterName,\n          message: finalMessage,\n          user_id: currentUser?.id || null,\n          voted_date: new Date().toISOString().split('T')[0]\n        })\n        .select('id');\n\n      if (voteError) {\n        console.error('Vote insert error:', voteError);\n        if (voteError.code === '23505') {\n          setErrorMessage('本日はすでに投票済みです。1日1回のみ投票可能です。');\n          return;\n        }\n        setErrorMessage(`投票の記録に失敗しました。エラーコード: ${voteError.code}`);\n        return;\n      }\n\n      console.log('Vote recorded successfully:', voteData);\n\n      // Step 2: アーティストにポイントを追加（最も確実なアプローチ）\n      console.log('Adding points to artist:', selectedArtistId);\n      \n      // 直接SQLを使用してポイントを更新\n      const { data: pointsUpdateResult, error: pointsError } = await supabase\n        .rpc('add_artist_points', {\n          artist_id_param: selectedArtistId,\n          points_to_add: 10\n        });\n\n      if (pointsError) {\n        console.error('RPC points addition error:', pointsError);\n        \n        // フォールバック1: 直接UPDATE\n        try {\n          const { data: currentData, error: fetchError } = await supabase\n            .from('artists')\n            .select('points')\n            .eq('id', selectedArtistId)\n            .single();\n\n          if (!fetchError && currentData) {\n            const currentPoints = currentData.points || 0;\n            console.log('Fallback - Current points:', currentPoints);\n            \n            const { error: updateError } = await supabase\n              .from('artists')\n              .update({ points: currentPoints + 10 })\n              .eq('id', selectedArtistId);\n\n            if (updateError) {\n              console.error('Fallback update error:', updateError);\n            } else {\n              console.log('Fallback update successful');\n            }\n          }\n        } catch (fallbackError) {\n          console.error('Fallback error:', fallbackError);\n        }\n      } else {\n        console.log('RPC points addition successful, new total:', pointsUpdateResult);\n      }\n\n      // Step 3: 最終確認\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      const { data: finalArtist, error: checkError } = await supabase\n        .from('artists')\n        .select('points')\n        .eq('id', selectedArtistId)\n        .single();\n\n      if (!checkError && finalArtist) {\n        console.log('Final verification - artist points:', finalArtist.points);\n      }\n\n      // ログインユーザーの場合は投票履歴も記録\n      if (currentUser) {\n        const { error: historyError } = await supabase\n          .from('user_vote_history')\n          .insert({\n            auth_user_id: currentUser.id,\n            phone_number: votePhoneNumber,\n            artist_id: selectedArtistId,\n            voted_date: new Date().toISOString().split('T')[0]\n          });\n\n        if (historyError && historyError.code !== '23505') {\n          console.error('History record error:', historyError);\n        }\n      }\n\n      setShowSuccessModal(true);\n    } catch (error) {\n      console.error('Record vote error:', error);\n      setErrorMessage('予期しないエラーが発生しました。しばらく時間をおいて再度お試しください。');\n    }\n  };\n\n  const handleSuccessModalClose = () => {\n    setShowSuccessModal(false);\n    setTimeout(() => {\n      onClose(true);\n      resetForm();\n    }, 300);\n  };\n\n  // 成功モーダル\n  const SuccessModal = () => (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 z-[60] flex items-center justify-center p-4\">\n      <div className=\"bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm mx-auto p-6 text-center\">\n        <div className=\"mb-4\">\n          <div className=\"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n            </svg>\n          </div>\n          <h3 className=\"text-xl font-bold text-white mb-2\">投票完了！</h3>\n          <p className=\"text-neutral-300 text-sm\">\n            投票が完了しました！<br />\n            ありがとうございます。\n          </p>\n        </div>\n        <button\n          onClick={handleSuccessModalClose}\n          className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 px-4 rounded-md hover:opacity-90 transition duration-200\"\n        >\n          OK\n        </button>\n      </div>\n    </div>\n  );\n\n  return ReactDOM.createPortal(\n    <>\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n        <div className=\"bg-neutral-900 rounded-lg shadow-xl w-full max-w-md mx-auto max-h-[90vh] overflow-y-auto\">\n          <div className=\"flex justify-between items-center p-4 border-b border-neutral-700\">\n            <h2 className=\"text-xl font-bold text-white\">投票</h2>\n            <button onClick={handleClose} className=\"text-neutral-400 hover:text-white\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {step === 'artist-selection' && (\n            <div className=\"p-6\">\n              <h2 className=\"text-2xl font-bold mb-4 text-white\">アーティストを選択してください</h2>\n              <div className=\"space-y-3\">\n                {artists.map((artist) => (\n                  <button\n                    key={artist.id}\n                    onClick={() => {\n                      setSelectedArtistId(artist.id);\n                      setStep('phone-input');\n                    }}\n                    className=\"w-full p-4 text-left bg-neutral-800 border border-neutral-700 rounded-md hover:bg-neutral-700 hover:border-neutral-600 transition duration-200\"\n                  >\n                    <div className=\"flex items-center gap-4\">\n                      <img\n                        src={artist.image_url}\n                        alt={artist.name}\n                        className=\"w-12 h-12 rounded-full object-cover\"\n                      />\n                      <div>\n                        <h3 className=\"font-bold text-white\">{artist.name}</h3>\n                        <p className=\"text-sm text-neutral-400\">{artist.role}</p>\n                      </div>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {step === 'phone-input' && (\n            <div className=\"p-6\">\n              <h2 className=\"text-2xl font-bold mb-4 text-white\">\n                {currentUser && userPhoneNumber ? '投票確認' : '電話番号認証'}\n              </h2>\n              \n              {hasAlreadyVotedToday ? (\n                <div className=\"mb-4 p-4 bg-yellow-900 border border-yellow-700 rounded-md\">\n                  <p className=\"text-yellow-300\">本日はすでに投票済みです。1日1回のみ投票可能です。</p>\n                </div>\n              ) : currentUser && userPhoneNumber ? (\n                <div className=\"mb-4\">\n                  <p className=\"text-neutral-300 mb-4\">\n                    登録済みの電話番号で投票します：{userPhoneNumber}\n                  </p>\n                  <div className=\"mb-4\">\n                    <label htmlFor=\"message\" className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                      応援メッセージ（任意）\n                    </label>\n                    <textarea\n                      id=\"message\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      placeholder=\"HPにて公開されます。\"\n                      rows={3}\n                      className=\"w-full p-3 bg-neutral-800 rounded-md border border-neutral-700 text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  {errorMessage && <p className=\"text-red-400 text-center mb-4\">{errorMessage}</p>}\n                  <button\n                    onClick={handleVote}\n                    disabled={isLoading}\n                    className=\"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white py-3 px-4 rounded-md hover:opacity-90 transition duration-200 disabled:opacity-50\"\n                  >\n                    {isLoading ? '投票中...' : '投票する'}\n                  </button>\n                </div>\n              ) : (\n                <>\n                  <div className=\"mb-4\">\n                    <label htmlFor=\"phone\" className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                      電話番号\n                    </label>\n                    <input\n                      type=\"tel\"\n                      id=\"phone\"\n                      value={phoneNumber}\n                      onChange={handlePhoneNumberChange}\n                      placeholder=\"09012345678\"\n                      className=\"w-full p-3 bg-neutral-800 rounded-md border border-neutral-700 text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"mb-6\">\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                      ニックネーム (公開されます)\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      value={voterName}\n                      onChange={(e) => setVoterName(e.target.value)}\n                      placeholder=\"例: しゅーと\"\n                      className=\"w-full p-3 bg-neutral-800 rounded-md border border-neutral-700 text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      required\n                    />\n                  </div>\n\n                  <div className=\"mb-8\">\n                    <label htmlFor=\"message\" className=\"block text-sm font-medium text-neutral-300 mb-2\">\n                      応援メッセージ\n                    </label>\n                    <textarea\n                      id=\"message\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      placeholder=\"HPにて公開されます。\"\n                      rows={3}\n                      className=\"w-full p-3 bg-neutral-800 rounded-md border border-neutral-700 text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n\n                  {errorMessage && <p className=\"text-red-400 text-center mb-4\">{errorMessage}</p>}\n\n                  <div className=\"text-center text-xs text-neutral-400 mb-4\">\n                    <p>\n                      「認証コードを送信」ボタンを押すことにより、\n                      <button type=\"button\" onClick={onShowPrivacyPolicy} className=\"text-blue-400 hover:underline\">個人情報の取り扱い</button>\n                      について同意したものとみなします。\n                    </p>\n                  </div>\n\n                  <button\n                    onClick={handleVote}\n                    disabled={isLoading || !phoneNumber || !voterName}\n                    className=\"w-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-bold py-3 px-4 rounded-md hover:opacity-90 transition-opacity duration-300 text-lg disabled:opacity-50\"\n                  >\n                    {isLoading ? '送信中...' : '認証コードを送信'}\n                  </button>\n                </>\n              )}\n            </div>\n          )}\n\n          {step === 'otp' && (\n            <div className=\"p-6\">\n              <h2 className=\"text-2xl font-bold mb-4 text-white\">認証コードを入力</h2>\n              <p className=\"text-sm text-neutral-400 mb-4\">\n                SMSに届いた6桁の認証コードを入力してください。\n              </p>\n              <div className=\"mb-4\">\n                <input\n                  type=\"text\"\n                  value={otp}\n                  onChange={(e) => setOtp(e.target.value)}\n                  placeholder=\"123456\"\n                  className=\"w-full p-3 bg-neutral-800 rounded-md border border-neutral-700 text-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                />\n              </div>\n              {errorMessage && <p className=\"text-red-400 text-center mb-4\">{errorMessage}</p>}\n              <button\n                onClick={handleSubmitVote}\n                disabled={isSubmitting}\n                className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold py-3 px-4 rounded-md hover:opacity-90 transition-opacity duration-300 text-lg disabled:opacity-50\"\n              >\n                {isSubmitting ? '投票中...' : 'この内容で投票する'}\n              </button>\n            </div>\n          )}\n\n          <div className=\"p-4 border-t border-neutral-700\">\n            <button\n              onClick={handleClose}\n              className=\"w-full text-center text-sm text-neutral-400 hover:text-white\"\n            >\n              閉じる\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* 成功モーダルを別レイヤーで表示 */}\n      {showSuccessModal && <SuccessModal />}\n    </>,\n    document.body\n  );\n};\n\nexport default VoteModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7035, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Artist.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport VoteModal from './VoteModal';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface Artist {\n  id: string;\n  name: string;\n  role: string;\n  image_url: string;\n}\n\ninterface ArtistProps {\n  onShowPrivacyPolicy: () => void;\n}\n\ninterface VoteCount {\n  artist_id: string;\n  vote_count: number;\n}\n\nconst Artist: React.FC<ArtistProps> = ({ onShowPrivacyPolicy }) => {\n  const [staff, setStaff] = useState<Artist[]>([]);\n  const [voteCounts, setVoteCounts] = useState<VoteCount[]>([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [userType, setUserType] = useState<'individual' | 'sponsor' | null>(null);\n  const [showSponsorMessage, setShowSponsorMessage] = useState(false);\n\n  const fetchArtists = useCallback(async () => {\n    const { data, error } = await supabase\n      .from('artists')\n      .select('id, name, role, image_url');\n    \n    if (error) {\n      console.error('Error fetching artists:', error);\n    } else {\n      setStaff(data || []);\n    }\n  }, []);\n\n  const fetchVoteCounts = useCallback(async () => {\n    const { data, error } = await supabase.rpc('get_artist_vote_counts');\n    if (error) {\n      console.error('Error fetching vote counts:', error);\n    } else {\n      setVoteCounts(data || []);\n    }\n  }, []);\n\n  const checkUserType = useCallback(async () => {\n    try {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (!session?.user) {\n        setUserType(null);\n        return;\n      }\n\n      // individual_membersテーブルをチェック\n      const { data: individualMember } = await supabase\n        .from('individual_members')\n        .select('id')\n        .eq('auth_user_id', session.user.id)\n        .maybeSingle();\n\n      if (individualMember) {\n        setUserType('individual');\n        return;\n      }\n\n      // sponsor_membersテーブルをチェック\n      const { data: sponsorMember } = await supabase\n        .from('sponsor_members')\n        .select('id')\n        .eq('auth_user_id', session.user.id)\n        .maybeSingle();\n\n      if (sponsorMember) {\n        setUserType('sponsor');\n        return;\n      }\n\n      setUserType(null);\n    } catch (error) {\n      console.error('Error checking user type:', error);\n      setUserType(null);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchArtists();\n    fetchVoteCounts();\n    checkUserType();\n  }, [fetchArtists, fetchVoteCounts, checkUserType]);\n\n  useEffect(() => {\n    // reference voteCounts to avoid \"'voteCounts' が宣言されていますが、その値が読み取られることはありません\" TypeScript error\n    // The state is kept for future use (vote counts are fetched via RPC).\n    void voteCounts;\n  }, [voteCounts]);\n\n  const handleModalClose = (voteSubmitted: boolean) => {\n    setIsModalOpen(false);\n    if (voteSubmitted) {\n      fetchVoteCounts();\n    }\n  };\n\n  // Removed unused `colors` array since it wasn't referenced.\n  // artistVoteData was removed because it was declared but never read.\n  // If you intend to render vote summaries, recreate this structure where it's actually used.\n\n  return (\n    <>\n      <section id=\"artist\" className=\"py-20 md:py-32 bg-neutral-900\">\n        <div className=\"container mx-auto px-6 md:px-12\">\n          <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">\n            ARTIST\n          </h2>\n          <p className=\"font-noto text-lg text-center mb-12\">まもなくアーティスト募集開始予定</p>\n\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12 max-w-6xl mx-auto\">\n            {staff.map((person) => {\n                // votes 表示を削除（計算は残すが表示しない）\n                return (\n                  <div key={person.id} className=\"text-center bg-neutral-800/60 p-8 rounded-lg border border-neutral-700 shadow-sm\">\n                    <img\n                      src={person.image_url}\n                      alt={`${person.name}の写真`}\n                      className=\"w-40 h-40 mx-auto rounded-full mb-4 object-cover\"\n                    />\n                    <h3 className=\"font-noto text-2xl font-bold\">{person.name}</h3>\n                    {/* <p className=\"text-neutral-400\">{person.role}</p> */}\n                  </div>\n                );\n              })}\n          </div>\n\n          <div className=\"text-center mt-16\">\n            <button\n              // onClick={handleVoteButtonClick}\n              className=\"bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition-opacity duration-300 text-lg\"\n            >\n              coming soon\n            </button>\n          </div>\n        </div>\n      </section>\n\n      {/* スポンサーメッセージモーダル */}\n      {showSponsorMessage && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-neutral-800 rounded-lg p-8 max-w-md mx-4 relative\">\n            <button\n              onClick={() => setShowSponsorMessage(false)}\n              className=\"absolute top-4 right-4 text-neutral-400 hover:text-white text-xl\"\n            >\n              ×\n            </button>\n            \n            <div className=\"text-center\">\n              <h2 className=\"text-2xl font-bold text-white mb-6\">\n                投票確認\n              </h2>\n              \n              <div className=\"bg-orange-600 text-white p-4 rounded-lg mb-6\">\n                <p>\n                  スポンサーアカウントでは投票できません。<br />\n                  投票は一般ユーザーアカウントでのみ可能です。\n                </p>\n              </div>\n              \n              <button\n                onClick={() => setShowSponsorMessage(false)}\n                className=\"bg-neutral-600 hover:bg-neutral-700 text-white px-6 py-2 rounded-md transition duration-200\"\n              >\n                閉じる\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <VoteModal\n        isOpen={isModalOpen}\n        onClose={handleModalClose}\n        artists={staff}\n        onShowPrivacyPolicy={onShowPrivacyPolicy}\n      />\n    </>\n  );\n};\n\nexport default Artist;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 7316, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/NewsModal.tsx"],"sourcesContent":["import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ReactMarkdown from 'react-markdown';\nimport { X } from 'lucide-react';\n\ninterface NewsItem {\n  id: string;\n  published_date: string;\n  title: string;\n  content: string;\n}\n\ninterface NewsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  newsItem: NewsItem | null;\n}\n\nconst NewsModal: React.FC<NewsModalProps> = ({ isOpen, onClose, newsItem }) => {\n  if (!newsItem) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black/80 z-[60] flex items-center justify-center p-4\"\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ y: 50, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            exit={{ y: 50, opacity: 0 }}\n            className=\"bg-neutral-900 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"p-8 md:p-12\">\n              <button\n                onClick={onClose}\n                className=\"absolute top-4 right-4 text-neutral-500 hover:text-white transition-colors\"\n              >\n                <X size={28} />\n              </button>\n              <p className=\"text-sm text-neutral-400 mb-2\">{new Date(newsItem.published_date).toLocaleDateString()}</p>\n              <h3 className=\"text-2xl md:text-3xl font-bold mb-6 gradient-text\">{newsItem.title}</h3>\n              <div className=\"prose prose-invert prose-lg max-w-none\">\n                <ReactMarkdown>{newsItem.content}</ReactMarkdown>\n              </div>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default NewsModal;\n"],"names":[],"mappings":";;;;;AACA;AAAA;AACA;AACA;;;;;AAeA,MAAM,YAAsC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE;IACxE,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,6LAAC,+MAAe;kBACb,wBACC,6LAAC,uMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;YAAE;YACtB,SAAS;gBAAE,SAAS;YAAE;YACtB,MAAM;gBAAE,SAAS;YAAE;YACnB,WAAU;YACV,SAAS;sBAET,cAAA,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,GAAG;oBAAI,SAAS;gBAAE;gBAC7B,SAAS;oBAAE,GAAG;oBAAG,SAAS;gBAAE;gBAC5B,MAAM;oBAAE,GAAG;oBAAI,SAAS;gBAAE;gBAC1B,WAAU;gBACV,SAAS,CAAC,IAAM,EAAE,eAAe;0BAEjC,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,oMAAC;gCAAC,MAAM;;;;;;;;;;;sCAEX,6LAAC;4BAAE,WAAU;sCAAiC,IAAI,KAAK,SAAS,cAAc,EAAE,kBAAkB;;;;;;sCAClG,6LAAC;4BAAG,WAAU;sCAAqD,SAAS,KAAK;;;;;;sCACjF,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,sMAAa;0CAAE,SAAS,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhD;KAtCM;uCAwCS","debugId":null}},
    {"offset": {"line": 7440, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/News.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../lib/supabaseClient';\nimport NewsModal from './NewsModal';\n\ninterface NewsItem {\n  id: string;\n  published_date: string;\n  title: string;\n  content: string;\n}\n\nconst News: React.FC = () => {\n  const [news, setNews] = useState<NewsItem[]>([]);\n  const [selectedNews, setSelectedNews] = useState<NewsItem | null>(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const fetchNews = useCallback(async () => {\n    const { data, error } = await supabase\n      .from('news')\n      .select('id, published_date, title, content')\n      .order('published_date', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching news:', error);\n    } else {\n      setNews(data || []);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchNews();\n  }, [fetchNews]);\n\n  const handleNewsClick = (item: NewsItem) => {\n    setSelectedNews(item);\n    setIsModalOpen(true);\n  };\n\n  return (\n    <>\n      <section id=\"news\" className=\"py-20 md:py-32 bg-neutral-900\">\n        <div className=\"container mx-auto px-6 md:px-12\">\n          <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">NEWS</h2>\n          <p className=\"font-noto text-lg text-center mb-12\">お知らせ</p>\n          <div className=\"max-w-3xl mx-auto border-t border-neutral-700\">\n            {news.map((item) => (\n              <button\n                key={item.id}\n                onClick={() => handleNewsClick(item)}\n                className=\"w-full text-left border-b border-neutral-700 py-6 flex flex-col md:flex-row md:items-center hover:bg-white/5 transition-colors\"\n              >\n                <p className=\"text-neutral-400 md:mr-6 md:w-24 mb-2 md:mb-0 flex-shrink-0\">\n                  {new Date(item.published_date).toLocaleDateString()}\n                </p>\n                <p className=\"font-noto flex-1\">{item.title}</p>\n              </button>\n            ))}\n          </div>\n        </div>\n      </section>\n      <NewsModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        newsItem={selectedNews}\n      />\n    </>\n  );\n};\n\nexport default News;"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AASA,MAAM,OAAiB;;IACrB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAkB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,MAAM,YAAY,IAAA,4KAAW;uCAAC;YAC5B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,QACL,MAAM,CAAC,sCACP,KAAK,CAAC,kBAAkB;gBAAE,WAAW;YAAM;YAE9C,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,wBAAwB;YACxC,OAAO;gBACL,QAAQ,QAAQ,EAAE;YACpB;QACF;sCAAG,EAAE;IAEL,IAAA,0KAAS;0BAAC;YACR;QACF;yBAAG;QAAC;KAAU;IAEd,MAAM,kBAAkB,CAAC;QACvB,gBAAgB;QAChB,eAAe;IACjB;IAEA,qBACE;;0BACE,6LAAC;gBAAQ,IAAG;gBAAO,WAAU;0BAC3B,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAoE;;;;;;sCAClF,6LAAC;4BAAE,WAAU;sCAAsC;;;;;;sCACnD,6LAAC;4BAAI,WAAU;sCACZ,KAAK,GAAG,CAAC,CAAC,qBACT,6LAAC;oCAEC,SAAS,IAAM,gBAAgB;oCAC/B,WAAU;;sDAEV,6LAAC;4CAAE,WAAU;sDACV,IAAI,KAAK,KAAK,cAAc,EAAE,kBAAkB;;;;;;sDAEnD,6LAAC;4CAAE,WAAU;sDAAoB,KAAK,KAAK;;;;;;;mCAPtC,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;0BAatB,6LAAC,6IAAS;gBACR,QAAQ;gBACR,SAAS,IAAM,eAAe;gBAC9B,UAAU;;;;;;;;AAIlB;GAxDM;KAAA;uCA0DS","debugId":null}},
    {"offset": {"line": 7573, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/MainAd.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface SponsorAd {\n  ad_url_1?: string;\n  ad_url_2?: string;\n  ad_link_1?: string;\n  ad_link_2?: string;\n}\n\n// Generate Vimeo embed URL\nconst getVimeoEmbedUrl = (input?: string) => {\n  if (!input) return '';\n  // Extract src attribute from iframe tag\n  const srcMatch = input.match(/src=\"([^\"]+)\"/);\n  if (srcMatch) return srcMatch[1];\n  // If direct URL, extract video ID\n  const urlMatch = input.match(/vimeo\\.com\\/(?:video\\/)?(\\d+)/);\n  return urlMatch\n    ? `https://player.vimeo.com/video/${urlMatch[1]}?autoplay=1&loop=1&muted=1&background=1`\n    : '';\n};\n\n// Check if the URL is an image\nconst isImageUrl = (url?: string) => {\n  if (!url) return false;\n  // Also treat Supabase storage URLs as images\n  return (\n    /\\.(jpg|jpeg|png|gif|webp|svg)$/i.test(url) ||\n    url.startsWith('data:image') ||\n    url.includes('/storage/v1/object/')\n  );\n};\n\nconst MainAd: React.FC = () => {\n  const [adUrls, setAdUrls] = useState<SponsorAd>({});\n\n  useEffect(() => {\n    const fetchAdUrls = async () => {\n      const { data, error } = await supabase\n        .from('sponsors')\n        .select('ad_url_1, ad_url_2, ad_link_1, ad_link_2')\n        .eq('type', 'main')\n        .single();\n      if (error) {\n        console.error('Error fetching main ad:', error);\n      } else if (data) {\n        setAdUrls(data as SponsorAd);\n      }\n    };\n    fetchAdUrls();\n  }, []);\n\n  const adData = React.useMemo(() => [\n    { url: adUrls.ad_url_1, link: adUrls.ad_link_1 },\n    { url: adUrls.ad_url_2, link: adUrls.ad_link_2 }\n  ], [adUrls]);\n\n  return (\n    <section id=\"main-ad\" className=\"py-12 bg-neutral-900\">\n      <div className=\"container mx-auto px-6 md:px-12 flex flex-col md:flex-row gap-0 justify-center items-center\">\n        {adData.map((ad, idx) =>\n          ad.url ? (\n            <div\n              key={ad.url}\n              className=\"w-full flex justify-center items-center\"\n              style={{ minWidth: 0 }}\n            >\n              <div className=\"w-full\">\n                <div style={{ position: 'relative', width: '100%', paddingTop: '56.25%' }}>\n                  <div\n                    style={{\n                      display: 'block',\n                      position: 'absolute',\n                      top: 0,\n                      left: 0,\n                      width: '100%',\n                      height: '100%',\n                    }}\n                  >\n                    {isImageUrl(ad.url) ? (\n                      <img\n                        src={ad.url}\n                        alt={`Sponsor ad ${idx + 1}`}\n                        style={{\n                          width: '100%',\n                          height: '100%',\n                          objectFit: 'cover',\n                        }}\n                      />\n                    ) : (\n                      <iframe\n                        src={getVimeoEmbedUrl(ad.url)}\n                        allow=\"autoplay; fullscreen\"\n                        className=\"w-full h-full\"\n                        title={`Sponsor video ${idx + 1}`}\n                        style={{ pointerEvents: 'none', border: 0 }}\n                      />\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : null\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default MainAd;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AASA,2BAA2B;AAC3B,MAAM,mBAAmB,CAAC;IACxB,IAAI,CAAC,OAAO,OAAO;IACnB,wCAAwC;IACxC,MAAM,WAAW,MAAM,KAAK,CAAC;IAC7B,IAAI,UAAU,OAAO,QAAQ,CAAC,EAAE;IAChC,kCAAkC;IAClC,MAAM,WAAW,MAAM,KAAK,CAAC;IAC7B,OAAO,WACH,CAAC,+BAA+B,EAAE,QAAQ,CAAC,EAAE,CAAC,uCAAuC,CAAC,GACtF;AACN;AAEA,+BAA+B;AAC/B,MAAM,aAAa,CAAC;IAClB,IAAI,CAAC,KAAK,OAAO;IACjB,6CAA6C;IAC7C,OACE,kCAAkC,IAAI,CAAC,QACvC,IAAI,UAAU,CAAC,iBACf,IAAI,QAAQ,CAAC;AAEjB;AAEA,MAAM,SAAmB;;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAY,CAAC;IAEjD,IAAA,0KAAS;4BAAC;YACR,MAAM;gDAAc;oBAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,4CACP,EAAE,CAAC,QAAQ,QACX,MAAM;oBACT,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,2BAA2B;oBAC3C,OAAO,IAAI,MAAM;wBACf,UAAU;oBACZ;gBACF;;YACA;QACF;2BAAG,EAAE;IAEL,MAAM,SAAS,wKAAK,CAAC,OAAO;kCAAC,IAAM;gBACjC;oBAAE,KAAK,OAAO,QAAQ;oBAAE,MAAM,OAAO,SAAS;gBAAC;gBAC/C;oBAAE,KAAK,OAAO,QAAQ;oBAAE,MAAM,OAAO,SAAS;gBAAC;aAChD;iCAAE;QAAC;KAAO;IAEX,qBACE,6LAAC;QAAQ,IAAG;QAAU,WAAU;kBAC9B,cAAA,6LAAC;YAAI,WAAU;sBACZ,OAAO,GAAG,CAAC,CAAC,IAAI,MACf,GAAG,GAAG,iBACJ,6LAAC;oBAEC,WAAU;oBACV,OAAO;wBAAE,UAAU;oBAAE;8BAErB,cAAA,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,OAAO;gCAAE,UAAU;gCAAY,OAAO;gCAAQ,YAAY;4BAAS;sCACtE,cAAA,6LAAC;gCACC,OAAO;oCACL,SAAS;oCACT,UAAU;oCACV,KAAK;oCACL,MAAM;oCACN,OAAO;oCACP,QAAQ;gCACV;0CAEC,WAAW,GAAG,GAAG,kBAChB,6LAAC;oCACC,KAAK,GAAG,GAAG;oCACX,KAAK,CAAC,WAAW,EAAE,MAAM,GAAG;oCAC5B,OAAO;wCACL,OAAO;wCACP,QAAQ;wCACR,WAAW;oCACb;;;;;6FAGF,6LAAC;oCACC,KAAK,iBAAiB,GAAG,GAAG;oCAC5B,OAAM;oCACN,WAAU;oCACV,OAAO,CAAC,cAAc,EAAE,MAAM,GAAG;oCACjC,OAAO;wCAAE,eAAe;wCAAQ,QAAQ;oCAAE;;;;;;;;;;;;;;;;;;;;;mBAhC/C,GAAG,GAAG;;;;+DAuCX;;;;;;;;;;;AAKd;GA1EM;KAAA;uCA4ES","debugId":null}},
    {"offset": {"line": 7728, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Crowdfunding.tsx"],"sourcesContent":["import React from 'react';\nimport Link from 'next/link';\n\nconst Crowdfunding: React.FC = () => {\n\n  return (\n    <section id=\"crowdfunding\" className=\"py-20 md:py-32 bg-neutral-900\">\n      <div className=\"container mx-auto px-6 md:px-12 text-center\">\n        <h2 className=\"section-title text-4xl md:text-5xl mb-4 gradient-text\">CROWDFUNDING</h2>\n        <p className=\"font-noto text-lg mb-12\">クラウドファンディング期間：2026年3月1日〜2026年4月14日（予定）</p>\n        <div className=\"max-w-4xl mx-auto text-left bg-neutral-800/60 p-8 md:p-12 rounded-lg border border-neutral-700 shadow-sm\">\n          <p className=\"font-noto text-base leading-relaxed text-neutral-300 mb-8\">\n            リターン内容や実際の開始時期などは、当サイトにてお知らせいたします。\n          </p>\n          <p className=\"font-noto text-base leading-relaxed text-neutral-300 mb-8\">\n            以下から、メンバーシップへの登録（無料）をお願いいたします。\n          </p>\n        </div>\n        <Link\n          href=\"/users\"\n          className=\"btn-cta inline-block mt-12 bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold font-noto py-4 px-12 rounded-full text-lg shadow-lg\"\n        >\n          メンバーシップへの登録（無料）\n        </Link>\n      </div>\n    </section>\n  );\n};\n\nexport default Crowdfunding;"],"names":[],"mappings":";;;;;AACA;;;AAEA,MAAM,eAAyB;IAE7B,qBACE,6LAAC;QAAQ,IAAG;QAAe,WAAU;kBACnC,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAwD;;;;;;8BACtE,6LAAC;oBAAE,WAAU;8BAA0B;;;;;;8BACvC,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAA4D;;;;;;sCAGzE,6LAAC;4BAAE,WAAU;sCAA4D;;;;;;;;;;;;8BAI3E,6LAAC,0KAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT;KAxBM;uCA0BS","debugId":null}},
    {"offset": {"line": 7816, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Contact.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\ninterface ContactProps {\n    onShowPrivacyPolicy: () => void;\n}\n\nconst Contact: React.FC<ContactProps> = ({ onShowPrivacyPolicy }) => {\n    const [formData, setFormData] = useState({\n        name: '',\n        company: '',\n        email: '',\n        phone: '',\n        inquiryType: '',\n        message: '',\n    });\n    const [messageLength, setMessageLength] = useState(0);\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [isSuccess, setIsSuccess] = useState(false);\n    const [isError, setIsError] = useState(false);\n    const [errorMessage, setErrorMessage] = useState('');\n\n    // Googleフォームの情報を環境変数から取得（フォールバック付き）\n    const GOOGLE_FORM_ACTION_URL = process.env.NEXT_PUBLIC_GOOGLE_FORM_ACTION_URL || 'https://docs.google.com/forms/d/e/1FAIpQLScb8qou8O0Ed_9g-nBFB2tXPH6wwPtgtRYHhboqwqQJ1hBIng/formResponse';\n    const NAME_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_NAME_ID || 'entry.925362011';\n    const COMPANY_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_COMPANY_ID || 'entry.1358542594';\n    const EMAIL_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_EMAIL_ID || 'entry.425392835';\n    const PHONE_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_PHONE_ID || 'entry.907531421';\n    const INQUIRY_TYPE_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_INQUIRY_TYPE_ID || 'entry.282942206';\n    const MESSAGE_INPUT_NAME = process.env.NEXT_PUBLIC_GOOGLE_FORM_MESSAGE_ID || 'entry.688326170';\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!formData.name || !formData.email || !formData.message || !formData.inquiryType) {\n            setErrorMessage('必須項目をすべて入力してください。');\n            setIsError(true);\n            setTimeout(() => setIsError(false), 3000);\n            return;\n        }\n\n        const phoneRegex = /^0\\d{1,4}-?\\d{1,4}-?\\d{4}$/;\n        if (formData.phone && !phoneRegex.test(formData.phone)) {\n            setErrorMessage('有効な電話番号の形式ではありません。');\n            setIsError(true);\n            setTimeout(() => setIsError(false), 3000);\n            return;\n        }\n\n        setIsSubmitting(true);\n        setIsError(false);\n        setErrorMessage('');\n\n        const googleFormData = new FormData();\n        googleFormData.append(NAME_INPUT_NAME, formData.name);\n        googleFormData.append(COMPANY_INPUT_NAME, formData.company);\n        googleFormData.append(EMAIL_INPUT_NAME, formData.email);\n        googleFormData.append(PHONE_INPUT_NAME, formData.phone);\n        googleFormData.append(INQUIRY_TYPE_INPUT_NAME, formData.inquiryType);\n        googleFormData.append(MESSAGE_INPUT_NAME, formData.message);\n\n        fetch(GOOGLE_FORM_ACTION_URL, {\n            method: 'POST',\n            body: googleFormData,\n            mode: 'no-cors',\n        })\n        .then(() => {\n            setIsSubmitting(false);\n            setIsSuccess(true);\n        })\n        .catch(error => {\n            console.error('Error submitting form:', error);\n            setErrorMessage('送信中にエラーが発生しました。');\n            setIsError(true);\n            setIsSubmitting(false);\n        });\n    };\n\n    return (\n        <section id=\"contact\" className=\"py-20 md:py-32 bg-neutral-900\">\n            <div className=\"container mx-auto px-6 md:px-12 max-w-3xl\">\n                <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">\n                    CONTACT\n                </h2>\n                <p className=\"font-noto text-lg text-center text-neutral-300 mb-12\">\n                    プロジェクトに関するお問い合わせはこちらから\n                </p>\n\n                {/* セクション背景と揃え、枠・影を無くしてフラットな見た目に */}\n                <div className=\"bg-neutral-900 p-8 rounded-lg\">\n                    {isSuccess ? (\n                        <div className=\"text-center text-white p-8\">\n                            <h3 className=\"text-2xl font-bold mb-4 text-emerald-400\">送信完了</h3>\n                            <p>お問い合わせいただきありがとうございます。</p>\n                            <p>内容を確認の上、担当者よりご連絡いたします。</p>\n                        </div>\n                    ) : (\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"flex flex-col gap-6 mb-6\">\n                                <div>\n                                    <label htmlFor=\"name\" className=\"block text-sm font-medium mb-2\">\n                                        お名前<span className=\"text-red-500 ml-1\">*</span>\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"name\"\n                                        value={formData.name}\n                                        onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                        className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white placeholder:text-gray-500\"\n                                        placeholder=\"山田 太郎\"\n                                        disabled={isSubmitting}\n                                    />\n                                </div>\n                                <div>\n                                    <label htmlFor=\"company\" className=\"block text-sm font-medium mb-2\">\n                                        会社名\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"company\"\n                                        value={formData.company}\n                                        onChange={(e) => setFormData({ ...formData, company: e.target.value })}\n                                        className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white placeholder:text-gray-500\"\n                                        placeholder=\"株式会社TrueStory\"\n                                        disabled={isSubmitting}\n                                    />\n                                </div>\n                                <div>\n                                    <label htmlFor=\"email\" className=\"block text-sm font-medium mb-2\">\n                                        メールアドレス<span className=\"text-red-500 ml-1\">*</span>\n                                    </label>\n                                    <input\n                                        type=\"email\"\n                                        id=\"email\"\n                                        value={formData.email}\n                                        onChange={(e) => {\n                                            const value = e.target.value;\n                                            // 日本語の入力を防ぐ\n                                            const filteredValue = value.replace(/[ぁ-んァ-ン一-龯]/g, '');\n                                            setFormData({ ...formData, email: filteredValue });\n                                        }}\n                                        className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white placeholder:text-gray-500\"\n                                        placeholder=\"your.email@example.com\"\n                                        disabled={isSubmitting}\n                                    />\n                                </div>\n                                <div>\n                                    <label htmlFor=\"phone\" className=\"block text-sm font-medium mb-2\">\n                                        電話番号\n                                    </label>\n                                    <input\n                                        type=\"tel\"\n                                        id=\"phone\"\n                                        value={formData.phone}\n                                        onChange={(e) => {\n                                            const value = e.target.value;\n                                            // ハイフンを含め、数字以外の入力を防ぐ\n                                            const filteredValue = value.replace(/[^0-9]/g, '');\n                                            setFormData({ ...formData, phone: filteredValue });\n                                        }}\n                                        className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white placeholder:text-gray-500\"\n                                        placeholder=\"09012345678\"\n                                        disabled={isSubmitting}\n                                    />\n                                </div>\n                                <div>\n                                    <label htmlFor=\"inquiryType\" className=\"block text-sm font-medium mb-2\">\n                                        お問い合わせの種類<span className=\"text-red-500 ml-1\">*</span>\n                                    </label>\n                                    <select\n                                        id=\"inquiryType\"\n                                        value={formData.inquiryType}\n                                        onChange={(e) => setFormData({ ...formData, inquiryType: e.target.value })}\n                                        className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white\"\n                                        disabled={isSubmitting}\n                                    >\n                                        <option value=\"\" disabled>選択してください</option>\n                                        <option value=\"プロジェクトについて\">プロジェクトについて</option>\n                                        <option value=\"スポンサーについて\">スポンサーについて</option>\n                                        <option value=\"取材・メディア関連\">取材・メディア関連</option>\n                                        <option value=\"その他\">その他</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div className=\"mb-6\">\n                                <label htmlFor=\"message\" className=\"block text-sm font-medium mb-2\">\n                                    お問い合わせ内容<span className=\"text-red-500 ml-1\">*</span>\n                                </label>\n                                <textarea\n                                    id=\"message\"\n                                    value={formData.message}\n                                    onChange={(e) => {\n                                        setFormData({ ...formData, message: e.target.value });\n                                        setMessageLength(e.target.value.length);\n                                    }}\n                                    rows={6}\n                                    className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 text-white placeholder:text-gray-500\"\n                                    placeholder=\"お問い合わせ内容を入力してください\"\n                                    disabled={isSubmitting}\n                                />\n                                <div className=\"flex justify-end mt-1\">\n                                    <span className=\"text-sm text-gray-400\">\n                                        {messageLength}文字\n                                    </span>\n                                </div>\n                            </div>\n\n                            <div className=\"text-center text-xs text-neutral-400 mb-4\">\n                                <p>\n                                    「送信する」ボタンを押すことにより、\n                                    <button type=\"button\" onClick={onShowPrivacyPolicy} className=\"text-cyan-400 hover:underline\">個人情報の取り扱い</button>\n                                    について同意したものとみなします。\n                                </p>\n                            </div>\n\n                            <div className=\"text-center mt-8\">\n                                <button\n                                    type=\"submit\"\n                                    disabled={isSubmitting}\n                                    className=\"bg-gradient-to-r from-emerald-500 to-teal-500 text-white font-bold py-3 px-8 rounded-full hover:opacity-90 transition-opacity duration-300 text-lg disabled:opacity-50\"\n                                >\n                                    {isSubmitting ? '送信中...' : '送信する'}\n                                </button>\n                            </div>\n                            {isError && (\n                                <p className=\"text-center text-red-500 mt-4\">\n                                    {errorMessage}\n                                </p>\n                            )}\n                        </form>\n                    )}\n                </div>\n            </div>\n        </section>\n    );\n};\n\nexport default Contact;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8352, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Sponsor.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface Sponsor {\n  id: number;\n  name: string;\n  logo_url: string;\n  website_url?: string;\n  type: 'main' | 'gold' | 'silver' | 'supporter';\n  description?: string;\n}\n\nconst sponsorGroups = [\n  { title: 'メインスポンサー', type: 'main', size: 'lg' },\n  { title: 'ゴールドスポンサー', type: 'gold', size: 'md' },\n  { title: 'シルバースポンサー', type: 'silver', size: 'sm' },\n  { title: 'サポータースポンサー', type: 'supporter', size: 'sm' },\n] as const;\n\nconst sizeClasses = {\n  lg: {\n    grid: 'grid-cols-1',\n    card: 'max-w-md mx-auto',\n    logoContainer: 'h-56',\n    logo: 'max-h-40',\n    name: 'text-base',\n  },\n  md: {\n    grid: 'grid-cols-1 sm:grid-cols-2 lg:grid-cols-3',\n    card: '',\n    logoContainer: 'h-36',\n    logo: 'max-h-24',\n    name: 'text-sm',\n  },\n  sm: {\n    grid: 'grid-cols-3 sm:grid-cols-4 md:grid-cols-6',\n    card: '',\n    logoContainer: 'h-20',\n    logo: 'max-h-12',\n    name: 'text-xs',\n  },\n};\n\n// 各スポンサータイプ専用カード\nconst MainSponsorCard: React.FC<{ sponsor: Sponsor }> = ({ sponsor }) => (\n  <div className=\"flex flex-col md:flex-row items-center gap-8\">\n    <div className=\"flex-shrink-0 w-64 h-auto\">\n      <a\n        href={sponsor.website_url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <img\n          src={sponsor.logo_url}\n          alt={sponsor.name}\n          className=\"w-full h-auto object-contain\"\n        />\n      </a>\n    </div>\n    <div className=\"text-center md:text-left w-full max-w-64 mx-auto md:max-w-none md:mx-0\">\n      <h4 className=\"text-xl font-bold mb-2\">{sponsor.name}</h4>\n      {sponsor.description && (\n        <p className=\"text-neutral-300 text-sm leading-relaxed\">{sponsor.description}</p>\n      )}\n    </div>\n  </div>\n);\n\nconst GoldSponsorCard: React.FC<{ sponsor: Sponsor; styles: typeof sizeClasses['md'] }> = ({ sponsor, styles }) => (\n  <div className={`block text-center ${styles.card}`}>\n    <div className={`flex items-center justify-center ${styles.logoContainer} mb-1`}>\n      <a\n        href={sponsor.website_url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <img\n          src={sponsor.logo_url}\n          alt={sponsor.name}\n          className={`w-auto object-contain ${styles.logo}`}\n        />\n      </a>\n    </div>\n    <p className={`font-noto ${styles.name} text-neutral-300`}>{sponsor.name}</p>\n  </div>\n);\n\nconst SilverSponsorCard: React.FC<{ sponsor: Sponsor; styles: typeof sizeClasses['sm'] }> = ({ sponsor, styles }) => (\n  <a\n    href={sponsor.website_url}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    className={`block text-center ${styles.card}`}\n  >\n    <div className={`flex items-center justify-center ${styles.logoContainer}`}>\n      <img\n        src={sponsor.logo_url}\n        alt={sponsor.name}\n        className={`w-auto object-contain ${styles.logo}`}\n      />\n    </div>\n    {/* シルバーは名前表示なし */}\n  </a>\n);\n\nconst SupporterSponsorCard: React.FC<{ sponsor: Sponsor }> = ({ sponsor }) => (\n  <a\n    href={sponsor.website_url}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    className=\"text-neutral-300 hover:text-white text-sm\"\n  >\n    {sponsor.name}\n  </a>\n);\n\nconst Sponsor: React.FC = () => {\n  const [sponsors, setSponsors] = useState<Sponsor[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchSponsors = async () => {\n      setLoading(true);\n      setError(null);\n      const { data, error } = await supabase\n        .from('sponsors')\n        .select('*')\n        .order('type', { ascending: true })\n        .order('id', { ascending: true });\n      if (error) {\n        console.error('Error fetching sponsors:', error);\n        setError('スポンサー情報の取得に失敗しました。時間をおいて再度お試しください。');\n      } else if (data) {\n        setSponsors(data as Sponsor[]);\n      }\n      setLoading(false);\n    };\n    fetchSponsors();\n  }, []);\n\n  return (\n    <section id=\"sponsors\" className=\"py-20 md:py-32 bg-neutral-900 text-white\">\n      <div className=\"container mx-auto px-6 md:px-12\">\n        <h2 className=\"section-title text-4xl md:text-5xl text-center mb-4 gradient-text\">\n          SPONSOR\n        </h2>\n        <p className=\"font-noto text-lg text-center mb-20\">ご協賛企業様</p>\n\n        {loading ? (\n          <div className=\"text-center py-10\">Loading...</div>\n        ) : error ? (\n          <div className=\"text-center py-10 text-red-500\">{error}</div>\n        ) : (\n          <div className=\"space-y-20\">\n            {sponsorGroups.map((group) => {\n              const groupSponsors = sponsors.filter((s) => s.type === group.type);\n              if (groupSponsors.length === 0) return null;\n              const styles = sizeClasses[group.size];\n\n              return (\n                <div key={group.type}>\n                  <h3 className=\"text-2xl md:text-3xl font-bold text-center mb-10 tracking-widest\">\n                    {group.title.toUpperCase()}\n                  </h3>\n                  <div className=\"max-w-4xl mx-auto\">\n                    {group.type === 'main' ? (\n                      <div className=\"space-y-6\">\n                        {groupSponsors.map((sponsor) => (\n                          // 枠を無くし、背景をセクションと同色に合わせる\n                          <div key={sponsor.id} className=\"bg-neutral-900 p-6 rounded-lg\">\n                            <MainSponsorCard sponsor={sponsor} />\n                          </div>\n                        ))}\n                      </div>\n                    ) : group.type === 'supporter' ? (\n                      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-x-6 gap-y-3 text-center max-w-64 mx-auto md:max-w-4xl md:mx-auto\">\n                        {groupSponsors.map((sponsor) => (\n                          <div key={sponsor.id} className=\"bg-neutral-900 p-3 rounded-md\">\n                            <SupporterSponsorCard sponsor={sponsor} />\n                          </div>\n                        ))}\n                      </div>\n                    ) : group.type === 'gold' ? (\n                      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6 md:gap-8 max-w-64 mx-auto md:max-w-4xl md:mx-auto\">\n                        {groupSponsors.map((sponsor) => (\n                          <div key={sponsor.id} className=\"bg-neutral-900 p-4 rounded-lg\">\n                            <GoldSponsorCard sponsor={sponsor} styles={styles} />\n                          </div>\n                        ))}\n                      </div>\n                    ) : (\n                      <div className={`grid ${styles.grid} gap-4 max-w-64 mx-auto md:max-w-4xl md:mx-auto`}>\n                        {groupSponsors.map((sponsor) => (\n                          <div key={sponsor.id} className=\"bg-neutral-900 p-3 rounded-md flex items-center justify-center\">\n                            <SilverSponsorCard sponsor={sponsor} styles={styles} />\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Sponsor;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 8762, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Footer.tsx"],"sourcesContent":["import React from 'react';\n\ninterface FooterProps {\n  onShowPrivacyPolicy: () => void;\n}\n\nconst Footer: React.FC<FooterProps> = ({ onShowPrivacyPolicy }) => {\n  return (\n    <footer className=\"bg-black text-neutral-500 py-6 text-center text-xs\">\n      <div className=\"container mx-auto px-6\">\n        <button onClick={onShowPrivacyPolicy} className=\"hover:text-white transition-colors duration-300 mb-2\">\n          個人情報の取り扱いについて\n        </button>\n        <p>&copy; {new Date().getFullYear()} True Story. All Rights Reserved.</p>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;"],"names":[],"mappings":";;;;;;AAMA,MAAM,SAAgC,CAAC,EAAE,mBAAmB,EAAE;IAC5D,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAO,SAAS;oBAAqB,WAAU;8BAAuD;;;;;;8BAGvG,6LAAC;;wBAAE;wBAAQ,IAAI,OAAO,WAAW;wBAAG;;;;;;;;;;;;;;;;;;AAI5C;KAXM;uCAaS","debugId":null}},
    {"offset": {"line": 8817, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/Seo.tsx"],"sourcesContent":["import Head from 'next/head';\n\n// 環境変数から既定のOG画像を取得\nconst DEFAULT_OG_IMAGE = process.env.NEXT_PUBLIC_OG_IMAGE_URL || '';\n\ntype SeoProps = {\n  title?: string;\n  description?: string;\n  keywords?: string[];\n  url?: string;\n  image?: string; // ページ単位で上書き可能\n};\n\nconst Seo: React.FC<SeoProps> = ({ title, description, keywords, url, image }) => {\n  const ogImage = image || DEFAULT_OG_IMAGE;\n  const siteName = 'True Story【実話の物語】';\n  const fullTitle = `${title} | ${siteName}`;\n\n  return (\n    <Head>\n      <title>{fullTitle}</title>\n      <meta name=\"description\" content={description} />\n      <meta name=\"keywords\" content={keywords?.join(', ')} />\n\n      {/* Open Graph / Facebook */}\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:url\" content={url} />\n      <meta property=\"og:title\" content={fullTitle} />\n      <meta property=\"og:description\" content={description} />\n      <meta property=\"og:image\" content={ogImage} />\n      <meta property=\"og:image:alt\" content={title || 'True Story'} />\n      <meta property=\"og:site_name\" content={siteName} />\n      <meta property=\"og:locale\" content=\"ja_JP\" />\n\n      {/* Twitter */}\n      <meta name=\"twitter:card\" content={ogImage ? 'summary_large_image' : 'summary'} />\n      <meta name=\"twitter:url\" content={url} />\n      <meta name=\"twitter:title\" content={fullTitle} />\n      <meta name=\"twitter:description\" content={description} />\n      <meta name=\"twitter:image\" content={ogImage} />\n      <meta name=\"twitter:image:alt\" content={title || 'True Story'} />\n    </Head>\n  );\n};\n\nexport default Seo;\n"],"names":[],"mappings":";;;;AAGyB;;AAHzB;;;AAEA,mBAAmB;AACnB,MAAM,mBAAmB,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAUjE,MAAM,MAA0B,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE;IAC3E,MAAM,UAAU,SAAS;IACzB,MAAM,WAAW;IACjB,MAAM,YAAY,GAAG,MAAM,GAAG,EAAE,UAAU;IAE1C,qBACE,6LAAC,kLAAI;;0BACH,6LAAC;0BAAO;;;;;;0BACR,6LAAC;gBAAK,MAAK;gBAAc,SAAS;;;;;;0BAClC,6LAAC;gBAAK,MAAK;gBAAW,SAAS,UAAU,KAAK;;;;;;0BAG9C,6LAAC;gBAAK,UAAS;gBAAU,SAAQ;;;;;;0BACjC,6LAAC;gBAAK,UAAS;gBAAS,SAAS;;;;;;0BACjC,6LAAC;gBAAK,UAAS;gBAAW,SAAS;;;;;;0BACnC,6LAAC;gBAAK,UAAS;gBAAiB,SAAS;;;;;;0BACzC,6LAAC;gBAAK,UAAS;gBAAW,SAAS;;;;;;0BACnC,6LAAC;gBAAK,UAAS;gBAAe,SAAS,SAAS;;;;;;0BAChD,6LAAC;gBAAK,UAAS;gBAAe,SAAS;;;;;;0BACvC,6LAAC;gBAAK,UAAS;gBAAY,SAAQ;;;;;;0BAGnC,6LAAC;gBAAK,MAAK;gBAAe,SAAS,UAAU,wBAAwB;;;;;;0BACrE,6LAAC;gBAAK,MAAK;gBAAc,SAAS;;;;;;0BAClC,6LAAC;gBAAK,MAAK;gBAAgB,SAAS;;;;;;0BACpC,6LAAC;gBAAK,MAAK;gBAAsB,SAAS;;;;;;0BAC1C,6LAAC;gBAAK,MAAK;gBAAgB,SAAS;;;;;;0BACpC,6LAAC;gBAAK,MAAK;gBAAoB,SAAS,SAAS;;;;;;;;;;;;AAGvD;KA9BM;uCAgCS","debugId":null}},
    {"offset": {"line": 8987, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/CountdownTimer.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst CountdownTimer: React.FC = () => {\n    type TimeLeft = {\n        days: number;\n        hours: number;\n        minutes: number;\n        seconds: number;\n    };\n\n    const calculateTimeLeft = (): Partial<TimeLeft> => {\n        // 目標日を設定（11月31日に設定）\n        const year = new Date().getFullYear();\n        const difference = +new Date(`${year}-11-30T23:59:59`) - +new Date();\n        let timeLeft: Partial<TimeLeft> = {};\n\n        if (difference > 0) {\n            timeLeft = {\n                days: Math.floor(difference / (1000 * 60 * 60 * 24)),\n                hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n                minutes: Math.floor((difference / 1000 / 60) % 60),\n                seconds: Math.floor((difference / 1000) % 60)\n            };\n        }\n        return timeLeft;\n    };\n\n    const [timeLeft, setTimeLeft] = useState<Partial<TimeLeft>>(calculateTimeLeft());\n    const [isVisible, setIsVisible] = useState(false);\n\n    const scrollToSection = (sectionId: string) => {\n        const element = document.getElementById(sectionId);\n        if (element) {\n            element.scrollIntoView({ behavior: 'smooth' });\n        }\n    };\n\n    useEffect(() => {\n        const handleScroll = () => {\n            // 画面の高さを80%以上スクロールしたら表示\n            if (window.scrollY > window.innerHeight * 0.8) {\n                setIsVisible(true);\n            } else {\n                setIsVisible(false);\n            }\n        };\n\n        window.addEventListener('scroll', handleScroll);\n        handleScroll(); // 初期表示時にもチェック\n\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, []);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setTimeLeft(calculateTimeLeft());\n        }, 1000);\n\n        return () => clearTimeout(timer);\n    });\n\n    const timerComponents: JSX.Element[] = [];\n\n    (Object.keys(timeLeft) as (keyof TimeLeft)[]).forEach((interval) => {\n        if (timeLeft[interval] === undefined) {\n            return;\n        }\n    \n        timerComponents.push(\n            <div key={interval} className=\"flex flex-col items-center md:mx-2\">\n                <span className=\"text-xl md:text-3xl font-bold font-mono tracking-tighter text-emerald-300\">\n                    {String(timeLeft[interval]).padStart(2, '0')}\n                </span>\n                <span className=\"text-[10px] leading-tight md:text-xs uppercase text-neutral-400\">{interval}</span>\n            </div>\n        );\n    });\n\n    return (\n        <AnimatePresence>\n            {isVisible && (\n                <motion.button\n                    onClick={() => scrollToSection('truestory')}\n                    initial={{ opacity: 0, x: -50 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    exit={{ opacity: 0, x: -50 }}\n                    transition={{ duration: 0.5, type: 'spring' }}\n                    className=\"fixed bottom-4 left-4 z-50 bg-neutral-900/80 backdrop-blur-md text-white p-2 rounded-lg shadow-2xl border border-white/10 flex items-center gap-x-3 md:block md:p-4 md:w-auto hover:bg-neutral-700/80 transition-colors\"\n                >\n                    <h4 className=\"hidden md:block text-xs font-bold tracking-wider md:text-center md:mb-3\">実話募集の締め切りまで</h4>\n                    <div className=\"flex flex-col gap-y-0.5 md:flex-row md:justify-center\">\n                        {timerComponents.length ? timerComponents : <span>実話募集を締め切りました</span>}\n                    </div>\n                </motion.button>\n            )}\n        </AnimatePresence>\n    );\n};\n\nexport default CountdownTimer;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAA2B;;IAQ7B,MAAM,oBAAoB;QACtB,oBAAoB;QACpB,MAAM,OAAO,IAAI,OAAO,WAAW;QACnC,MAAM,aAAa,CAAC,IAAI,KAAK,GAAG,KAAK,eAAe,CAAC,IAAI,CAAC,IAAI;QAC9D,IAAI,WAA8B,CAAC;QAEnC,IAAI,aAAa,GAAG;YAChB,WAAW;gBACP,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,OAAO,KAAK,KAAK,EAAE;gBAClD,OAAO,KAAK,KAAK,CAAC,AAAC,aAAa,CAAC,OAAO,KAAK,EAAE,IAAK;gBACpD,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAO,KAAM;gBAC/C,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAQ;YAC9C;QACJ;QACA,OAAO;IACX;IAEA,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAoB;IAC5D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,kBAAkB,CAAC;QACrB,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,IAAI,SAAS;YACT,QAAQ,cAAc,CAAC;gBAAE,UAAU;YAAS;QAChD;IACJ;IAEA,IAAA,0KAAS;oCAAC;YACN,MAAM;yDAAe;oBACjB,wBAAwB;oBACxB,IAAI,OAAO,OAAO,GAAG,OAAO,WAAW,GAAG,KAAK;wBAC3C,aAAa;oBACjB,OAAO;wBACH,aAAa;oBACjB;gBACJ;;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAClC,gBAAgB,cAAc;YAE9B;4CAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACtD;mCAAG,EAAE;IAEL,IAAA,0KAAS;oCAAC;YACN,MAAM,QAAQ;kDAAW;oBACrB,YAAY;gBAChB;iDAAG;YAEH;4CAAO,IAAM,aAAa;;QAC9B;;IAEA,MAAM,kBAAiC,EAAE;IAExC,OAAO,IAAI,CAAC,UAAiC,OAAO,CAAC,CAAC;QACnD,IAAI,QAAQ,CAAC,SAAS,KAAK,WAAW;YAClC;QACJ;QAEA,gBAAgB,IAAI,eAChB,6LAAC;YAAmB,WAAU;;8BAC1B,6LAAC;oBAAK,WAAU;8BACX,OAAO,QAAQ,CAAC,SAAS,EAAE,QAAQ,CAAC,GAAG;;;;;;8BAE5C,6LAAC;oBAAK,WAAU;8BAAmE;;;;;;;WAJ7E;;;;;IAOlB;IAEA,qBACI,6LAAC,+MAAe;kBACX,2BACG,6LAAC,uMAAM,CAAC,MAAM;YACV,SAAS,IAAM,gBAAgB;YAC/B,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC3B,YAAY;gBAAE,UAAU;gBAAK,MAAM;YAAS;YAC5C,WAAU;;8BAEV,6LAAC;oBAAG,WAAU;8BAA0E;;;;;;8BACxF,6LAAC;oBAAI,WAAU;8BACV,gBAAgB,MAAM,GAAG,gCAAkB,6LAAC;kCAAK;;;;;;;;;;;;;;;;;;;;;;AAM1E;GA/FM;KAAA;uCAiGS","debugId":null}},
    {"offset": {"line": 9155, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/constants.ts"],"sourcesContent":["export const seoKeywords = \"True Story,実話の物語,truestory,ストーリー,実話,物語,トゥルーストーリー,ミュージックビデオ,MV,music Video,短編作品,ショートフィルム,クラウドファンディング,クラファン,キャンプファイヤー,CAMPFIRE,シンガー,シンガーソングライター,アーティスト,歌い手,シンガー募集,アーティスト募集,役者募集,出演者募集,女優,俳優,支援,寄付,インフルエンサー,TikToker,Instagramer,YouTuber,カメラマン,映像クリエイター,映像ディレクター,動画クリエイター,音声,映画\";\n"],"names":[],"mappings":";;;;AAAO,MAAM,cAAc","debugId":null}},
    {"offset": {"line": 9167, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/GoldAd.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { supabase } from '../lib/supabaseClient';\n\ninterface GoldSponsor {\n  id: number;\n  name: string;\n  ad_url_1?: string;\n  website_url?: string;\n}\n\nconst GoldAd: React.FC = () => {\n  const [sponsors, setSponsors] = useState<GoldSponsor[]>([]);\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const fetchGoldSponsors = async () => {\n      const { data, error } = await supabase\n        .from('sponsors')\n        .select('id, name, ad_url_1, website_url')\n        .eq('type', 'gold')\n        .order('id', { ascending: true });\n      if (error) {\n        console.error('Error fetching gold sponsors:', error);\n      } else if (data) {\n        setSponsors((data as GoldSponsor[]).slice(0, 5));\n      }\n    };\n    fetchGoldSponsors();\n  }, []);\n\n  const DUPLICATION_FACTOR = 5;\n  const loopSponsors = Array(DUPLICATION_FACTOR).fill(sponsors).flat();\n\n  return (\n    <section id=\"gold-ad\" className=\"py-8 bg-neutral-900\">\n      <div className=\"w-full\">\n        {/* PC/スマホ共通: 横スクロール */}\n        <div className=\"overflow-x-auto scrollbar-hide w-full\" style={{ WebkitOverflowScrolling: 'touch', marginLeft: 0, marginRight: 0 }}>\n          <div\n            ref={scrollRef}\n            className=\"flex items-center gap-8 animate-gold-scroll\"\n            style={{\n              minWidth: 'min-content',\n              width: 'max-content',\n              animation: sponsors.length > 1 ? 'gold-scroll 20s linear infinite' : undefined,\n            }}\n          >\n            {loopSponsors.map((sponsor, idx) => (\n              <a\n                key={`${sponsor.id}-${idx}`}\n                href={sponsor.website_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"block\"\n                style={{ flex: '0 0 auto' }}\n              >\n                {sponsor.ad_url_1 && (\n                  <img\n                    src={sponsor.ad_url_1}\n                    alt={sponsor.name}\n                    className=\"h-48 w-auto object-contain\"\n                    style={{ maxHeight: '192px', maxWidth: '480px' }}\n                  />\n                )}\n              </a>\n            ))}\n          </div>\n        </div>\n      </div>\n      <style>\n        {`\n          @keyframes gold-scroll {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-${100 / DUPLICATION_FACTOR}%); }\n          }\n          .animate-gold-scroll {\n            /* ...existing code... */\n          }\n          .scrollbar-hide::-webkit-scrollbar { display: none; }\n          .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }\n        `}\n      </style>\n      <style>\n        {`\n          /* ゆっくりスクロール: 40秒 */\n          .animate-gold-scroll {\n            animation-duration: 40s !important;\n          }\n        `}\n      </style>\n    </section>\n  );\n};\n\nexport default GoldAd;"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AASA,MAAM,SAAmB;;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAC1D,MAAM,YAAY,IAAA,uKAAM,EAAiB;IAEzC,IAAA,0KAAS;4BAAC;YACR,MAAM;sDAAoB;oBACxB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,mCACP,EAAE,CAAC,QAAQ,QACX,KAAK,CAAC,MAAM;wBAAE,WAAW;oBAAK;oBACjC,IAAI,OAAO;wBACT,QAAQ,KAAK,CAAC,iCAAiC;oBACjD,OAAO,IAAI,MAAM;wBACf,YAAY,AAAC,KAAuB,KAAK,CAAC,GAAG;oBAC/C;gBACF;;YACA;QACF;2BAAG,EAAE;IAEL,MAAM,qBAAqB;IAC3B,MAAM,eAAe,MAAM,oBAAoB,IAAI,CAAC,UAAU,IAAI;IAElE,qBACE,6LAAC;QAAQ,IAAG;QAAU,WAAU;;0BAC9B,6LAAC;gBAAI,WAAU;0BAEb,cAAA,6LAAC;oBAAI,WAAU;oBAAwC,OAAO;wBAAE,yBAAyB;wBAAS,YAAY;wBAAG,aAAa;oBAAE;8BAC9H,cAAA,6LAAC;wBACC,KAAK;wBACL,WAAU;wBACV,OAAO;4BACL,UAAU;4BACV,OAAO;4BACP,WAAW,SAAS,MAAM,GAAG,IAAI,oCAAoC;wBACvE;kCAEC,aAAa,GAAG,CAAC,CAAC,SAAS,oBAC1B,6LAAC;gCAEC,MAAM,QAAQ,WAAW;gCACzB,QAAO;gCACP,KAAI;gCACJ,WAAU;gCACV,OAAO;oCAAE,MAAM;gCAAW;0CAEzB,QAAQ,QAAQ,kBACf,6LAAC;oCACC,KAAK,QAAQ,QAAQ;oCACrB,KAAK,QAAQ,IAAI;oCACjB,WAAU;oCACV,OAAO;wCAAE,WAAW;wCAAS,UAAU;oCAAQ;;;;;;+BAZ9C,GAAG,QAAQ,EAAE,CAAC,CAAC,EAAE,KAAK;;;;;;;;;;;;;;;;;;;;0BAoBrC,6LAAC;0BACE,CAAC;;;0CAGgC,EAAE,MAAM,mBAAmB;;;;;;;QAO7D,CAAC;;;;;;0BAEH,6LAAC;0BACE,CAAC;;;;;QAKF,CAAC;;;;;;;;;;;;AAIT;GAlFM;KAAA;uCAoFS","debugId":null}},
    {"offset": {"line": 9311, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/components/SocialLinks.tsx"],"sourcesContent":["import React from 'react';\nimport { faXTwitter, faFacebook, faThreads, faYoutube, faInstagram } from '@fortawesome/free-brands-svg-icons'; // X (Twitter)アイコン, Facebookアイコン, Youtubeアイコン, Instagramアイコン\n// Font Awesomeのインポート\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport type { IconProp } from '@fortawesome/fontawesome-svg-core';\n\n\n\ntype SocialLink = { id: string; href: string; label: string; faIcon: IconProp };\n\nconst socialLinks: SocialLink[] = [\n  { id: 'x', href: 'https://x.com/truestory_2023', label: 'X', faIcon: faXTwitter },\n  // ThreadsアイコンをFont Awesomeのコンポーネントに置き換える\n  { id: 'threads', href: 'https://www.threads.net/@truestory_2023', label: 'Threads', faIcon: faThreads },\n  { id: 'instagram', href: 'https://www.instagram.com/truestory_2023/', label: 'Instagram', faIcon: faInstagram },\n  { id: 'facebook', href: 'https://www.facebook.com/people/Truestoryproject/100086524538968/', label: 'Facebook', faIcon: faFacebook },\n  { id: 'youtube', href: 'https://www.youtube.com/@truestoryt2023', label: 'YouTube', faIcon: faYoutube },\n];\n\nconst SocialLinks: React.FC = () => {\n  return (\n    <div className=\"fixed right-4 bottom-4 md:right-4 md:top-1/2 md:bottom-auto transform md:-translate-y-1/2 z-50 flex flex-col items-center gap-3\">\n      <div className=\"hidden md:block w-px h-16 bg-white/10\" />\n      {socialLinks.map((s) => {\n        return (\n          <a\n            key={s.id}\n            href={s.href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            aria-label={s.label}\n            className=\"w-9 h-9 md:w-10 md:h-10 rounded-full bg-neutral-900/80 border border-white/10 flex items-center justify-center text-white hover:bg-neutral-700/80 hover:scale-105 transition transform\"\n          >\n            <FontAwesomeIcon icon={s.faIcon} className=\"w-4 h-4 md:w-5 md:h-5\" />\n          </a>\n        );\n      })}\n      <div className=\"w-px h-12 md:h-16 bg-white/10 mt-2\" />\n    </div>\n  );\n};\n\nexport default SocialLinks;"],"names":[],"mappings":";;;;;AACA,6SAAgH,4DAA4D;AAC5K,qBAAqB;AACrB;;;;AAOA,MAAM,cAA4B;IAChC;QAAE,IAAI;QAAK,MAAM;QAAgC,OAAO;QAAK,QAAQ,0LAAU;IAAC;IAChF,yCAAyC;IACzC;QAAE,IAAI;QAAW,MAAM;QAA2C,OAAO;QAAW,QAAQ,yLAAS;IAAC;IACtG;QAAE,IAAI;QAAa,MAAM;QAA6C,OAAO;QAAa,QAAQ,2LAAW;IAAC;IAC9G;QAAE,IAAI;QAAY,MAAM;QAAqE,OAAO;QAAY,QAAQ,0LAAU;IAAC;IACnI;QAAE,IAAI;QAAW,MAAM;QAA2C,OAAO;QAAW,QAAQ,yLAAS;IAAC;CACvG;AAED,MAAM,cAAwB;IAC5B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;YACd,YAAY,GAAG,CAAC,CAAC;gBAChB,qBACE,6LAAC;oBAEC,MAAM,EAAE,IAAI;oBACZ,QAAO;oBACP,KAAI;oBACJ,cAAY,EAAE,KAAK;oBACnB,WAAU;8BAEV,cAAA,6LAAC,4LAAe;wBAAC,MAAM,EAAE,MAAM;wBAAE,WAAU;;;;;;mBAPtC,EAAE,EAAE;;;;;YAUf;0BACA,6LAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB;KArBM;uCAuBS","debugId":null}},
    {"offset": {"line": 9412, "column": 0}, "map": {"version":3,"sources":["file:///Users/tunotunofilms/Downloads/code/True%20Story/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport Header from '../components/Header';\nimport Title from '../components/Title';\nimport Introduction from '../components/Introduction';\nimport Message from '../components/Message';\nimport TrueStory from '../components/TrueStory';\nimport Artist from '../components/Artist';\nimport News from '../components/News';\nimport MainAd from '../components/MainAd';\nimport Crowdfunding from '../components/Crowdfunding';\nimport Contact from '../components/Contact';\nimport SponsorSection from '../components/Sponsor';\nimport Footer from '../components/Footer';\nimport PrivacyPolicy from '../components/PrivacyPolicy';\nimport Seo from '../components/Seo';\nimport CountdownTimer from '../components/CountdownTimer';\nimport { seoKeywords } from '../constants';\nimport GoldAd from '../components/GoldAd';\nimport SocialLinks from '../components/SocialLinks';\n\nexport default function HomePage() {\n  const [showPrivacyPolicy, setShowPrivacyPolicy] = useState(false);\n\n  const openPrivacyPolicy = () => setShowPrivacyPolicy(true);\n  const closePrivacyPolicy = () => setShowPrivacyPolicy(false);\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const getHeaderHeight = () => {\n      const headerEl = document.querySelector('header') as HTMLElement | null;\n      return headerEl?.offsetHeight || 80;\n    };\n\n    const scrollToElementWithOffset = (el: HTMLElement, smooth = true) => {\n      const headerHeight = getHeaderHeight();\n      const extraOffset = -800;\n      let top = window.pageYOffset + el.getBoundingClientRect().top - headerHeight - extraOffset;\n      if (top < 0) top = 0;\n      window.scrollTo({ top, behavior: smooth ? 'smooth' : 'auto' });\n    };\n\n    const scrollIfTruestoryForm = () => {\n      if (window.location.hash === '#truestoryform') {\n        const tryScroll = (tries = 0) => {\n          const el = document.getElementById('truestoryform');\n          if (el) {\n            scrollToElementWithOffset(el);\n          } else if (tries < 8) {\n            setTimeout(() => tryScroll(tries + 1), 50);\n          }\n        };\n        tryScroll(0);\n      }\n    };\n\n    scrollIfTruestoryForm();\n    window.addEventListener('hashchange', scrollIfTruestoryForm);\n\n    return () => {\n      window.removeEventListener('hashchange', scrollIfTruestoryForm);\n    };\n  }, []);\n\n  return (\n    <div className=\"bg-black\">\n      <Seo\n        title=\"True Story【実話の物語】| これは、あなたの物語かもしれない。\"\n        description=\"実話を基に楽曲制作・映像制作を行うTrue Story【実話の物語】。誰かの実話で、誰かが歌い、誰かが演じます。決まったマニュアルはありません。\"\n        keywords={typeof seoKeywords === 'string' ? seoKeywords.split(',').map(k => k.trim()).filter(Boolean) : seoKeywords}\n        url={process.env.NEXT_PUBLIC_APP_BASE_URL || 'http://localhost:3000'}\n      />\n      \n      <Header />\n      <Title />\n      <main>\n        <News />\n        <MainAd />\n        <Introduction />\n        <Message />\n        <GoldAd />\n        <section id=\"truestory\">\n          <TrueStory />\n        </section>\n        <Artist onShowPrivacyPolicy={openPrivacyPolicy} />\n        <Crowdfunding />\n        <SponsorSection />\n        <Contact onShowPrivacyPolicy={openPrivacyPolicy} />\n      </main>\n      <Footer onShowPrivacyPolicy={openPrivacyPolicy} />\n\n      <SocialLinks />\n\n      <CountdownTimer />\n      {showPrivacyPolicy && <PrivacyPolicy onClose={closePrivacyPolicy} />}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAwEa;;AAtEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AApBA;;;;;;;;;;;;;;;;;;;;AAsBe,SAAS;;IACtB,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAE3D,MAAM,oBAAoB,IAAM,qBAAqB;IACrD,MAAM,qBAAqB,IAAM,qBAAqB;IAEtD,IAAA,0KAAS;8BAAC;YACR;;YAEA,MAAM;sDAAkB;oBACtB,MAAM,WAAW,SAAS,aAAa,CAAC;oBACxC,OAAO,UAAU,gBAAgB;gBACnC;;YAEA,MAAM;gEAA4B,CAAC,IAAiB,SAAS,IAAI;oBAC/D,MAAM,eAAe;oBACrB,MAAM,cAAc,CAAC;oBACrB,IAAI,MAAM,OAAO,WAAW,GAAG,GAAG,qBAAqB,GAAG,GAAG,GAAG,eAAe;oBAC/E,IAAI,MAAM,GAAG,MAAM;oBACnB,OAAO,QAAQ,CAAC;wBAAE;wBAAK,UAAU,SAAS,WAAW;oBAAO;gBAC9D;;YAEA,MAAM;4DAAwB;oBAC5B,IAAI,OAAO,QAAQ,CAAC,IAAI,KAAK,kBAAkB;wBAC7C,MAAM;kFAAY,CAAC,QAAQ,CAAC;gCAC1B,MAAM,KAAK,SAAS,cAAc,CAAC;gCACnC,IAAI,IAAI;oCACN,0BAA0B;gCAC5B,OAAO,IAAI,QAAQ,GAAG;oCACpB;8FAAW,IAAM,UAAU,QAAQ;6FAAI;gCACzC;4BACF;;wBACA,UAAU;oBACZ;gBACF;;YAEA;YACA,OAAO,gBAAgB,CAAC,cAAc;YAEtC;sCAAO;oBACL,OAAO,mBAAmB,CAAC,cAAc;gBAC3C;;QACF;6BAAG,EAAE;IAEL,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,uIAAG;gBACF,OAAM;gBACN,aAAY;gBACZ,UAAU,OAAO,kIAAW,KAAK,WAAW,kIAAW,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC,WAAW,kIAAW;gBACnH,KAAK,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;;;;;;0BAG/C,6LAAC,0IAAM;;;;;0BACP,6LAAC,yIAAK;;;;;0BACN,6LAAC;;kCACC,6LAAC,wIAAI;;;;;kCACL,6LAAC,0IAAM;;;;;kCACP,6LAAC,gJAAY;;;;;kCACb,6LAAC,2IAAO;;;;;kCACR,6LAAC,0IAAM;;;;;kCACP,6LAAC;wBAAQ,IAAG;kCACV,cAAA,6LAAC,6IAAS;;;;;;;;;;kCAEZ,6LAAC,0IAAM;wBAAC,qBAAqB;;;;;;kCAC7B,6LAAC,gJAAY;;;;;kCACb,6LAAC,2IAAc;;;;;kCACf,6LAAC,2IAAO;wBAAC,qBAAqB;;;;;;;;;;;;0BAEhC,6LAAC,0IAAM;gBAAC,qBAAqB;;;;;;0BAE7B,6LAAC,+IAAW;;;;;0BAEZ,6LAAC,kJAAc;;;;;YACd,mCAAqB,6LAAC,iJAAa;gBAAC,SAAS;;;;;;;;;;;;AAGpD;GA7EwB;KAAA","debugId":null}}]
}